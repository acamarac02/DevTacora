<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Diseño documental y relaciones entre documentos | DevTacora</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://acamarac02.github.io/DevTacora/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://acamarac02.github.io/DevTacora/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://acamarac02.github.io/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Diseño documental y relaciones entre documentos | DevTacora"><meta data-rh="true" name="description" content="En este apartado estudiaremos qué criterios debemos tener en cuenta a la hora de diseñar nuestras bases de datos documentales, con el objetivo de garantizar la eficiencia en el acceso a los datos."><meta data-rh="true" property="og:description" content="En este apartado estudiaremos qué criterios debemos tener en cuenta a la hora de diseñar nuestras bases de datos documentales, con el objetivo de garantizar la eficiencia en el acceso a los datos."><link data-rh="true" rel="icon" href="/DevTacora/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://acamarac02.github.io/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental"><link data-rh="true" rel="alternate" href="https://acamarac02.github.io/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental" hreflang="es"><link data-rh="true" rel="alternate" href="https://acamarac02.github.io/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/DevTacora/blog/rss.xml" title="DevTacora RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/DevTacora/blog/atom.xml" title="DevTacora Atom Feed">



<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WCKN9ZY1F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WCKN9ZY1F",{anonymize_ip:!0})</script><link rel="stylesheet" href="/DevTacora/assets/css/styles.b35502a1.css">
<script src="/DevTacora/assets/js/runtime~main.99ff0e34.js" defer="defer"></script>
<script src="/DevTacora/assets/js/main.a45c1f3e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Principal" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Alternar barra lateral" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/DevTacora/"><div class="navbar__logo"><img src="/DevTacora/img/devtacora_logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/DevTacora/img/devtacora_logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DevTacora</b></a><a class="navbar__item navbar__link" href="/DevTacora/docs/pia_2526/">PIA</a><a class="navbar__item navbar__link" href="/DevTacora/docs/pmdm_2526/">PMDM</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/DevTacora/docs/licencia">Licencia</a><a href="https://www.linkedin.com/in/aliciacamcas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Cambiar entre modo oscuro y claro (actualmente modo claro)" aria-label="Cambiar entre modo oscuro y claro (actualmente modo claro)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra lateral de Documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/DevTacora/docs/category/ut5-acceso-a-bases-de-datos-nosql">UT5. Acceso a bases de datos NoSQL</a><button aria-label="Colapsar categoría &#x27;UT5. Acceso a bases de datos NoSQL&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/bbdd-nosql">Bases de datos NoSQL</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/">MongoDB</a><button aria-label="Colapsar categoría &#x27;MongoDB&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/puesta-en-marcha">Puesta en marcha</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/lenguaje-de-consulta">Lenguaje de consulta</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/conexion-java">Conexión desde Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/diseno-documental">Diseño documental</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/gestion-relaciones-Java">Gestión de relaciones en Java</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Rastro de navegación"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Página de Inicio" class="breadcrumbs__link" href="/DevTacora/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/DevTacora/docs/category/ut5-acceso-a-bases-de-datos-nosql"><span itemprop="name">UT5. Acceso a bases de datos NoSQL</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/"><span itemprop="name">MongoDB</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Diseño documental</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta página</button></div><div class="theme-doc-markdown markdown"><header><h1>Diseño documental y relaciones entre documentos</h1></header><div class="justify-text"><p>En este apartado estudiaremos qué criterios debemos tener en cuenta a la hora de diseñar nuestras bases de datos documentales, con el objetivo de garantizar la eficiencia en el acceso a los datos.</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>aviso</div><div class="admonitionContent_BuS1"><p>Ten en cuenta que este apartado lo explicaremos de forma superficial y habrá aspectos muy importantes en el diseño a los que nosotros no daremos mucha importancia.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-metodología-de-diseño-de-bases-de-datos-documentales">1. Metodología de diseño de bases de datos documentales<a href="#1-metodología-de-diseño-de-bases-de-datos-documentales" class="hash-link" aria-label="Enlace directo al 1. Metodología de diseño de bases de datos documentales" title="Enlace directo al 1. Metodología de diseño de bases de datos documentales">​</a></h2><p>El diseño de bases de datos documentales en MongoDB difiere significativamente de los modelos relacionales tradicionales, ya que se basa en la flexibilidad de los documentos JSON/BSON para modelar datos de manera más natural y eficiente. Para lograr un diseño óptimo, se deben considerar aspectos como la estructura de los documentos, la indexación, las consultas y el patrón de acceso a los datos.</p><p>A continuación, se presentan las principales fases de diseño en una base de datos documental, como MongoDB:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-análisis-de-requisitos-y-modelo-de-datos">1.1. Análisis de Requisitos y Modelo de Datos<a href="#11-análisis-de-requisitos-y-modelo-de-datos" class="hash-link" aria-label="Enlace directo al 1.1. Análisis de Requisitos y Modelo de Datos" title="Enlace directo al 1.1. Análisis de Requisitos y Modelo de Datos">​</a></h3><p>Antes de diseñar la estructura de los documentos, es fundamental entender los requisitos del sistema, incluyendo:</p><ul>
<li><strong>Casos de uso:</strong> Cómo se accederán y manipularán los datos. Se deben definir las consultas más frecuentes y operaciones críticas para optimizar el modelo de datos. Por ejemplo, en un e-commerce, las búsquedas de productos deben ser rápidas, mientras que las actualizaciones de inventario pueden ejecutarse en segundo plano.</li>
<li><strong>Volumen de datos:</strong> Estimación del tamaño y el crecimiento de la base de datos. Bases de datos con documentos grandes pueden requerir fragmentación (<strong>sharding</strong>) para evitar problemas de rendimiento.</li>
<li><strong>Frecuencia de consultas y escrituras:</strong> Identificación de las operaciones más comunes:<!-- -->
<ul>
<li><strong>Lectura intensiva</strong>: Optimizar índices y evitar consultas innecesarias.</li>
<li><strong>Escritura intensiva</strong>: Usar referencias en lugar de documentos embebidos si los datos cambian con frecuencia.</li>
<li><strong>Balanceado</strong>: Analizar estrategias para distribuir la carga.</li>
</ul>
</li>
<li><strong>Escalabilidad:</strong> Consideración del rendimiento y la replicación de los datos. Es importante definir si se necesita <strong>escalabilidad vertical</strong> (mejorar un solo servidor) o <strong>horizontal</strong> (sharding). También se recomienda el uso de réplicas para garantizar disponibilidad y distribuir datos geográficamente.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-elección-entre-modelado-embebido-o-normalizado">1.2. Elección entre Modelado Embebido o Normalizado<a href="#12-elección-entre-modelado-embebido-o-normalizado" class="hash-link" aria-label="Enlace directo al 1.2. Elección entre Modelado Embebido o Normalizado" title="Enlace directo al 1.2. Elección entre Modelado Embebido o Normalizado">​</a></h3><p>MongoDB permite dos enfoques principales para representar datos:</p><ul>
<li><strong>Modelado Embebido:</strong> Datos relacionados se almacenan en el mismo documento. Esto es ideal para consultas rápidas y datos que no cambian con frecuencia.</li>
<li><strong>Modelado Referenciado (Normalizado):</strong> Se utilizan referencias a otros documentos. Es útil cuando los datos relacionados son grandes o se reutilizan en múltiples lugares.</li>
</ul><p>La decisión de usar una u otra dependerá de:</p><ul>
<li><strong>Frecuencia de acceso:</strong> Si los datos se consultan juntos con frecuencia, conviene embebidos.</li>
<li><strong>Tamaño del documento:</strong> Documentos demasiado grandes pueden afectar el rendimiento. Ten en cuenta que el tamaño máximo de cada documento en MongoDB es de 16MB.</li>
<li><strong>Manejo de actualizaciones:</strong> Si se actualizan con frecuencia, una estructura referenciada puede ser mejor.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-indexación-y-optimización-de-consultas">1.3. Indexación y Optimización de Consultas<a href="#13-indexación-y-optimización-de-consultas" class="hash-link" aria-label="Enlace directo al 1.3. Indexación y Optimización de Consultas" title="Enlace directo al 1.3. Indexación y Optimización de Consultas">​</a></h3><p>El uso de índices es crucial en MongoDB para mejorar el rendimiento. Algunas estrategias incluyen:</p><ul>
<li><strong>Índices en campos frecuentemente consultados.</strong></li>
<li><strong>Índices compuestos para consultas con múltiples criterios.</strong></li>
<li><strong>Índices de texto para búsquedas en grandes volúmenes de datos.</strong></li>
<li><strong>Índices geoespaciales en datos de ubicación.</strong></li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-estrategias-de-particionamiento-y-replicación">1.4. Estrategias de Particionamiento y Replicación<a href="#14-estrategias-de-particionamiento-y-replicación" class="hash-link" aria-label="Enlace directo al 1.4. Estrategias de Particionamiento y Replicación" title="Enlace directo al 1.4. Estrategias de Particionamiento y Replicación">​</a></h3><p>Cuando la base de datos crece, es necesario distribuir la carga:</p><ul>
<li><strong>Replicación:</strong> Proporciona alta disponibilidad duplicando datos en múltiples servidores.</li>
<li><strong>Sharding:</strong> Distribuye datos en múltiples nodos para manejar grandes volúmenes de información.</li>
</ul><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>diferencias entre sharding y réplicas</div><div class="admonitionContent_BuS1"><p>La <strong>diferencia clave entre sharding y uso de réplicas</strong> en MongoDB radica en su propósito y funcionamiento:</p><ul>
<li>El <strong>objetivo del sharding</strong> es distribuir los datos en múltiples servidores (nodos) para mejorar el rendimiento y la capacidad de almacenamiento. Los datos se dividen en <strong>fragmentos (shards)</strong> y cada fragmento se almacena en un nodo diferente.</li>
<li>El <strong>objetivo de las réplicas</strong> es garantizar <strong>alta disponibilidad y tolerancia a fallos</strong> mediante copias de los datos en varios servidores. Un <strong>nodo primario</strong> recibe todas las escrituras y sincroniza los datos con uno o más <strong>nodos secundarios</strong>. Si el primario falla, uno de los secundarios se convierte en el nuevo primario automáticamente.</li>
</ul><p><strong>Diferencias Clave</strong></p><table><thead><tr><th>Característica</th><th>Sharding</th><th>Réplicas</th></tr></thead><tbody><tr><td><strong>Propósito</strong></td><td>Escalar almacenamiento y rendimiento</td><td>Asegurar disponibilidad y recuperación ante fallos</td></tr><tr><td><strong>Estructura</strong></td><td>Datos distribuidos en múltiples servidores</td><td>Múltiples copias de los mismos datos</td></tr><tr><td><strong>Escalabilidad</strong></td><td>Horizontal (añadiendo más servidores)</td><td>No escala el almacenamiento, solo la disponibilidad</td></tr><tr><td><strong>Casos de uso</strong></td><td>Bases de datos grandes y con alto tráfico</td><td>Sistemas que requieren alta disponibilidad y redundancia</td></tr></tbody></table><p>En sistemas grandes, <strong>sharding y réplicas se pueden combinar</strong>, asegurando escalabilidad y disponibilidad al mismo tiempo.</p></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-modelado-de-relaciones-en-mongodb">2. Modelado de Relaciones en MongoDB<a href="#2-modelado-de-relaciones-en-mongodb" class="hash-link" aria-label="Enlace directo al 2. Modelado de Relaciones en MongoDB" title="Enlace directo al 2. Modelado de Relaciones en MongoDB">​</a></h2><p>En bases de datos relacionales, las relaciones entre entidades se gestionan con claves foráneas y tablas intermedias. En MongoDB, las relaciones se pueden modelar de diversas formas, según la naturaleza de los datos y las consultas esperadas.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-relación-11">2.1. Relación 1:1<a href="#21-relación-11" class="hash-link" aria-label="Enlace directo al 2.1. Relación 1:1" title="Enlace directo al 2.1. Relación 1:1">​</a></h3><p>Un personaje tiene estrictamente una arma asociada, lo que se puede modelar de las siguientes formas:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="opciones-de-modelado">Opciones de Modelado<a href="#opciones-de-modelado" class="hash-link" aria-label="Enlace directo al Opciones de Modelado" title="Enlace directo al Opciones de Modelado">​</a></h4><ol>
<li>
<p><strong>Embebido en el mismo documento</strong>
En este caso, los datos del <strong>Arma</strong> se almacenan directamente dentro del documento del <strong>Personaje</strong>. Esto es útil cuando los datos del arma son pequeños y siempre se necesitan al acceder al personaje.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Espada Larga&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Una espada con filo brillante y equilibrada.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ventajas:</strong></p>
<ul>
<li>Mejora el rendimiento en consultas porque toda la información del personaje y su arma se obtiene en una sola operación.</li>
<li>Ideal para datos que siempre se acceden juntos.</li>
</ul>
<p><strong>Desventajas:</strong></p>
<ul>
<li>Si los datos del arma son grandes o se actualizan frecuentemente, esto puede generar problemas, como aumentar el tamaño del documento y complicar las actualizaciones.</li>
</ul>
</li>
<li>
<p><strong>Referencia a otro documento</strong>
Aquí, el documento del <strong>Personaje</strong> contiene solo una referencia al documento del <strong>Arma</strong> a través de un campo <code>arma_id</code>. El documento del <strong>Arma</strong> se almacena en su propia colección.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero Oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Armas</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Espada Larga&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Una espada con filo brillante y equilibrada.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ventajas:</strong></p>
<ul>
<li>Útil cuando los datos del arma son grandes, se comparten entre diferentes personajes o se actualizan con frecuencia.</li>
<li>Reduce el tamaño del documento del personaje.</li>
</ul>
<p><strong>Desventajas:</strong></p>
<ul>
<li>Requiere realizar consultas adicionales para obtener los datos del arma, lo que puede afectar el rendimiento si los datos se consultan frecuentemente.</li>
</ul>
</li>
</ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cuándo-elegir-cada-opción">Cuándo elegir cada opción<a href="#cuándo-elegir-cada-opción" class="hash-link" aria-label="Enlace directo al Cuándo elegir cada opción" title="Enlace directo al Cuándo elegir cada opción">​</a></h4><ul>
<li>
<p><strong>Embebido.</strong>  Úsalo si:</p>
<ul>
<li>Los datos del arma son pequeños y siempre se necesitan al consultar al personaje.</li>
<li>Las actualizaciones del arma son poco frecuentes.</li>
</ul>
</li>
<li>
<p><strong>Referenciado.</strong> Úsalo si:</p>
<ul>
<li>Los datos del arma son grandes o compartidos por varios personajes.</li>
<li>Las armas se actualizan frecuentemente o tienen su propio ciclo de vida independiente del personaje.</li>
</ul>
</li>
</ul><p>En este caso, como el arma es única para cada personaje y casi siempre se accede junto al personaje, el modelado <strong>embebido</strong> sería ideal.</p><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>en el documento embebido, ¿por qué el personaje es la entidad principal?</div><div class="admonitionContent_BuS1"><p>Técnicamente, <strong>se podría modelar al Arma como colección principal y guardar al Personaje embebido dentro de ella</strong>, pero esta no sería la mejor práctica para la mayoría de los casos de uso.</p><ul>
<li>Si el acceso principal en tu aplicación se enfoca en obtener un arma y su portador (Personaje), este diseño permite recuperar toda la información con una única consulta.</li>
<li>Si la aplicación necesita consultar principalmente personajes y sus datos, este diseño dificulta la consulta, ya que los personajes estarían embebidos dentro de las armas, lo que requeriría recorrer todos los documentos de armas para buscar un personaje específico.</li>
<li>En la mayoría de los escenarios, el Personaje suele ser la entidad principal y el arma es un atributo del personaje. Este diseño invierte esa lógica natural, lo que podría confundir el diseño de la aplicación.</li>
<li>Este diseño se vuelve complejo y poco práctico cuando el Personaje necesita gestionar múltiples relaciones con otras entidades (como habilidades, debilidades, etc.)</li>
</ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-relación-1n-uno-a-muchos">2.2. Relación 1:N (Uno a Muchos)<a href="#22-relación-1n-uno-a-muchos" class="hash-link" aria-label="Enlace directo al 2.2. Relación 1:N (Uno a Muchos)" title="Enlace directo al 2.2. Relación 1:N (Uno a Muchos)">​</a></h3><p>Para modelar la relación <strong>1<!-- -->:N<!-- --> (Uno a Muchos)</strong> entre <strong>Personaje</strong> y <strong>Habilidad</strong> en MongoDB (donde un <strong>Personaje</strong> tiene una habilidad, pero una habilidad puede ser compartida por múltiples personajes), y <strong>siendo Personaje la entidad principal</strong>, se pueden utilizar las siguientes estrategias:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="opciones-de-modelado-1">Opciones de Modelado<a href="#opciones-de-modelado-1" class="hash-link" aria-label="Enlace directo al Opciones de Modelado" title="Enlace directo al Opciones de Modelado">​</a></h4><ol>
<li>
<p><strong>Embebido (cuando la habilidad está estrechamente ligada al personaje y no se comparte)</strong> - No es nuestro caso pero vamos a ver cómo representarlo.<br>
<!-- -->En este caso, la información de la <strong>Habilidad</strong> se almacena directamente dentro del documento del <strong>Personaje</strong>. Esto es adecuado cuando la habilidad es específica de un personaje y no es compartida con otros.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personaje</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cabellero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidad&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fuerza Sobrehumana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Incrementa la fuerza física.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ventajas:</strong></p>
<ul>
<li>Consulta eficiente, ya que toda la información del personaje y su habilidad se encuentra en un único documento.</li>
<li>Simplicidad en el diseño si la habilidad no se comparte entre personajes.</li>
</ul>
<p><strong>Desventajas:</strong></p>
<ul>
<li>No es adecuado si una habilidad es compartida por varios personajes, ya que habría duplicación de datos (mismos datos de habilidad almacenados en múltiples documentos).</li>
</ul>
</li>
<li>
<p><strong>Referenciado con ID en el documento del personaje (cuando las habilidades se comparten entre personajes)</strong><br>
<!-- -->Aquí, el documento del <strong>Personaje</strong> incluye una referencia (<code>habilidad_id</code>) al documento correspondiente de <strong>Habilidad</strong>, que se almacena en su propia colección. Esto es útil si las habilidades son reutilizables entre múltiples personajes.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidad_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Habilidades</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fuerza Sobrehumana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Incrementa la fuerza física.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ventajas:</strong></p>
<ul>
<li>No hay duplicación de datos, ya que la habilidad se almacena una sola vez y se puede compartir entre múltiples personajes.</li>
<li>Es fácil actualizar o modificar una habilidad sin afectar otros documentos.</li>
</ul>
<p><strong>Desventajas:</strong></p>
<ul>
<li>Requiere una consulta adicional para recuperar los datos completos de la habilidad (por ejemplo, usando una operación <code>lookup</code> en una agregación).</li>
</ul>
</li>
</ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cuándo-elegir-cada-opción-1">Cuándo elegir cada opción<a href="#cuándo-elegir-cada-opción-1" class="hash-link" aria-label="Enlace directo al Cuándo elegir cada opción" title="Enlace directo al Cuándo elegir cada opción">​</a></h4><ul>
<li>
<p><strong>Embebido:</strong></p>
<ul>
<li>Si cada habilidad es única y específica para un personaje. (No es nuestro caso)</li>
<li>Si la habilidad no cambia con frecuencia y no se comparte entre personajes.</li>
</ul>
</li>
<li>
<p><strong>Referenciado:</strong></p>
<ul>
<li>Si las habilidades son reutilizables y pueden ser compartidas entre múltiples personajes.</li>
<li>Si las habilidades tienen su propio ciclo de vida (por ejemplo, se pueden modificar, eliminar o consultar independientemente de los personajes).</li>
</ul>
</li>
</ul><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>¿Qué pasaría si Habilidad (N) fuese la entidad principal?</div><div class="admonitionContent_BuS1"><p>Si <strong>Habilidad</strong> fuese la entidad principal y los personajes dependieran de las habilidades, podríamos modelar la relación de varias formas dependiendo de cómo se accede y se actualizan los datos. Esto implicaría que cada habilidad conoce a los personajes que la poseen.</p><p><strong>Opciones de Modelado</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-embebido-los-personajes-se-almacenan-como-un-array-dentro-de-cada-habilidad">1. <strong>Embebido: Los personajes se almacenan como un array dentro de cada habilidad</strong><a href="#1-embebido-los-personajes-se-almacenan-como-un-array-dentro-de-cada-habilidad" class="hash-link" aria-label="Enlace directo al 1-embebido-los-personajes-se-almacenan-como-un-array-dentro-de-cada-habilidad" title="Enlace directo al 1-embebido-los-personajes-se-almacenan-como-un-array-dentro-de-cada-habilidad">​</a></h4><p>En este modelo, cada documento de <strong>Habilidad</strong> contendrá un array con la información básica de los personajes que poseen esa habilidad.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Habilidades</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fuerza Sobrehumana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Incrementa la fuerza física.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;personajes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Duende feroz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Ventajas:</strong></p><ul>
<li>Consulta eficiente si el acceso se centra en la habilidad y los personajes relacionados.</li>
<li>Toda la información está contenida en un único documento.</li>
</ul><p><strong>Desventajas:</strong></p><ul>
<li>Si los datos de los personajes cambian frecuentemente, la actualización de los subdocumentos puede ser costosa.</li>
<li>No es adecuado si el número de personajes por habilidad crece mucho, ya que los documentos de habilidad pueden volverse muy grandes.</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-referenciado-los-personajes-son-referenciados-por-id-dentro-de-cada-habilidad">2. <strong>Referenciado: Los personajes son referenciados por ID dentro de cada habilidad</strong><a href="#2-referenciado-los-personajes-son-referenciados-por-id-dentro-de-cada-habilidad" class="hash-link" aria-label="Enlace directo al 2-referenciado-los-personajes-son-referenciados-por-id-dentro-de-cada-habilidad" title="Enlace directo al 2-referenciado-los-personajes-son-referenciados-por-id-dentro-de-cada-habilidad">​</a></h4><p>En este modelo, cada documento de <strong>Habilidad</strong> incluye un array de IDs de los personajes que poseen esa habilidad. Los datos completos de los personajes se almacenan en una colección separada.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Habilidades</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fuerza Sobrehumana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Incrementa la fuerza física.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;personajes_ids&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Duende feroz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Ventajas:</strong></p><ul>
<li>Permite manejar un gran número de personajes asociados a una habilidad sin sobrecargar el documento de habilidad.</li>
<li>Actualizar información del personaje no requiere modificar los documentos de habilidad.</li>
<li>Más flexible si los personajes necesitan ser consultados o gestionados de forma independiente.</li>
</ul><p><strong>Desventajas:</strong></p><ul>
<li>Consultar una habilidad con todos sus personajes requiere múltiples consultas (o un <code>lookup</code> en una agregación).</li>
</ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-relación-nm-muchos-a-muchos">2.3. Relación N:M (Muchos a Muchos)<a href="#23-relación-nm-muchos-a-muchos" class="hash-link" aria-label="Enlace directo al 2.3. Relación N:M (Muchos a Muchos)" title="Enlace directo al 2.3. Relación N:M (Muchos a Muchos)">​</a></h3><p>Para modelar la relación <strong>N<!-- -->:M<!-- --> (Muchos a Muchos)</strong> entre <strong>Personaje</strong> y <strong>Debilidad</strong> (donde un <strong>Personaje</strong> puede tener múltiples debilidades y cada <strong>Debilidad</strong> puede estar asociada a múltiples personajes), y considerando que <strong>Personaje</strong> es la entidad principal, podemos usar varios enfoques en MongoDB:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="opciones-de-modelado-2">Opciones de Modelado<a href="#opciones-de-modelado-2" class="hash-link" aria-label="Enlace directo al Opciones de Modelado" title="Enlace directo al Opciones de Modelado">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-embebido">1. <strong>Embebido</strong><a href="#1-embebido" class="hash-link" aria-label="Enlace directo al 1-embebido" title="Enlace directo al 1-embebido">​</a></h4><p>En este modelo, cada <strong>Personaje</strong> contiene un array embebido con las debilidades que tiene.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;debilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fobia al fuego&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme al fuego&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Miedo a las alturas&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme a las alturas&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Duende feroz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;debilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fobia al fuego&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme al fuego&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">304</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Miedo a las plantas&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme a las plantas&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Ventajas:</strong></p><ul>
<li>Toda la información del personaje (incluyendo sus debilidades) está contenida en un solo documento.</li>
<li>Consulta eficiente cuando el acceso se centra en los personajes.</li>
</ul><p><strong>Desventajas:</strong></p><ul>
<li>Se produce duplicidad de datos (desnormalización), pudiendo llevar a inconsistencia de datos.</li>
<li>Las actualizaciones de una debilidad compartida requerirían modificar múltiples documentos de personajes.</li>
</ul><p>Esta solución no es recomendable.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-referenciado-en-arrays">2. <strong>Referenciado en arrays</strong><a href="#2-referenciado-en-arrays" class="hash-link" aria-label="Enlace directo al 2-referenciado-en-arrays" title="Enlace directo al 2-referenciado-en-arrays">​</a></h4><p>En este modelo, cada documento de <strong>Personaje</strong> contiene un array de IDs que referencia los documentos de <strong>Debilidad</strong>, almacenados en su propia colección.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;debilidades_ids&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Debilidades</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fobia al fuego&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme al fuego&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Miedo a las alturas&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme a las alturas&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Ventajas:</strong></p><ul>
<li>Las debilidades son reutilizables entre múltiples personajes.</li>
<li>Las actualizaciones en los datos de una debilidad se reflejan automáticamente en todos los personajes relacionados.</li>
<li>Reduce el tamaño de los documentos de los personajes.</li>
</ul><p><strong>Desventajas:</strong></p><ul>
<li>Requiere consultas adicionales para obtener los detalles de las debilidades (por ejemplo, con una operación <code>lookup</code>).</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-colección-intermedia-para-relaciones-dinámicas-con-metadatos-adicionales">3. <strong>Colección intermedia (para relaciones dinámicas con metadatos adicionales)</strong><a href="#3-colección-intermedia-para-relaciones-dinámicas-con-metadatos-adicionales" class="hash-link" aria-label="Enlace directo al 3-colección-intermedia-para-relaciones-dinámicas-con-metadatos-adicionales" title="Enlace directo al 3-colección-intermedia-para-relaciones-dinámicas-con-metadatos-adicionales">​</a></h4><p>Este modelo utiliza una colección intermedia para representar la relación <strong>N<!-- -->:M</strong> entre <strong>Personaje</strong> y <strong>Debilidad</strong>. La colección intermedia puede almacenar información adicional, como cuándo se detectó la debilidad o el nivel de impacto de la debilidad en el personaje.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Personajes</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Caballero oscuro&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;arma_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;habilidades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Debilidades</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fobia al fuego&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;El personaje teme al fuego&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Intermedia Personaje_Debilidad</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;personaje_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;debilidad_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">301</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fecha_deteccion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-01-01&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nivel_impacto&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Alto&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;personaje_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;debilidad_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fecha_deteccion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-01-10&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nivel_impacto&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Moderado&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Ventajas:</strong></p><ul>
<li>Permite almacenar información adicional sobre la relación entre el personaje y la debilidad.</li>
<li>Es altamente flexible y escalable.</li>
<li>Las debilidades y personajes pueden ser gestionados de forma independiente.</li>
</ul><p><strong>Desventajas:</strong></p><ul>
<li>Las consultas pueden ser más complejas, ya que implican múltiples colecciones.</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cuándo-elegir-cada-opción-2">Cuándo elegir cada opción<a href="#cuándo-elegir-cada-opción-2" class="hash-link" aria-label="Enlace directo al Cuándo elegir cada opción" title="Enlace directo al Cuándo elegir cada opción">​</a></h4><ul>
<li>
<p><strong>Embebido:</strong></p>
<ul>
<li>Si las debilidades son pocas.</li>
<li>Si las consultas siempre están centradas en los personajes y sus detalles.</li>
<li>La relación entre personajes y debilidades es estática y no cambia con frecuencia.</li>
</ul>
</li>
<li>
<p><strong>Referenciado:</strong></p>
<ul>
<li>Si las debilidades son compartidas entre personajes.</li>
<li>Si las debilidades tienen valor independiente y necesitan ser gestionadas o consultadas fuera del contexto del personaje.</li>
</ul>
</li>
<li>
<p><strong>Colección intermedia:</strong></p>
<ul>
<li>Si necesitas almacenar metadatos adicionales sobre la relación (por ejemplo, el nivel de impacto de la debilidad en cada personaje).</li>
<li>Si las consultas involucran tanto a los personajes como a las debilidades de manera flexible.</li>
</ul>
</li>
</ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resumen-práctico">Resumen práctico<a href="#resumen-práctico" class="hash-link" aria-label="Enlace directo al Resumen práctico" title="Enlace directo al Resumen práctico">​</a></h3><table><thead><tr><th><strong>Criterio</strong></th><th><strong>Embebido</strong></th><th><strong>Referenciado</strong></th></tr></thead><tbody><tr><td><strong>Relación</strong></td><td>1:1 o pequeña 1<!-- -->:N</td><td>Grande 1<!-- -->:N<!-- --> o N<!-- -->:M</td></tr><tr><td><strong>Acceso conjunto</strong></td><td>Datos siempre se acceden juntos</td><td>Datos se acceden por separado</td></tr><tr><td><strong>Frecuencia de cambio</strong></td><td>Datos no cambian frecuentemente</td><td>Datos cambian frecuentemente</td></tr><tr><td><strong>Independencia</strong></td><td>Datos dependen del documento principal</td><td>Datos son independientes</td></tr><tr><td><strong>Tamaño de datos</strong></td><td>Datos pequeños</td><td>Datos grandes</td></tr><tr><td><strong>Consultas cruzadas</strong></td><td>No son necesarias</td><td>Son frecuentes</td></tr></tbody></table><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reglas-generales-para-tomar-decisiones">Reglas generales para tomar decisiones<a href="#reglas-generales-para-tomar-decisiones" class="hash-link" aria-label="Enlace directo al Reglas generales para tomar decisiones" title="Enlace directo al Reglas generales para tomar decisiones">​</a></h3><ol>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong></p>
<ul>
<li>Si <strong>sí</strong>, usa referenciado.</li>
<li>Si <strong>no</strong>, usa embebido.</li>
</ul>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong></p>
<ul>
<li>Si <strong>pocos</strong>, usa embebido.</li>
<li>Si <strong>muchos</strong>, usa referenciado.</li>
</ul>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong></p>
<ul>
<li>Si <strong>siempre</strong>, usa embebido.</li>
<li>Si <strong>a veces</strong>, usa referenciado.</li>
</ul>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong></p>
<ul>
<li>Si <strong>sí</strong>, usa referenciado.</li>
<li>Si <strong>no</strong>, usa embebido.</li>
</ul>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong></p>
<ul>
<li>Si <strong>sí</strong>, usa referenciado.</li>
<li>Si <strong>no</strong>, usa embebido.</li>
</ul>
</li>
</ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ejercicios">Ejercicios<a href="#ejercicios" class="hash-link" aria-label="Enlace directo al Ejercicios" title="Enlace directo al Ejercicios">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejercicio-1-misiones">Ejercicio 1: Misiones<a href="#ejercicio-1-misiones" class="hash-link" aria-label="Enlace directo al Ejercicio 1: Misiones" title="Enlace directo al Ejercicio 1: Misiones">​</a></h3><p>Partiendo del ejercicio Misiones que realizamos en el tema anterior, determina el diseño de la base de datos si utilizaramos MongoDB en vez de MySQL. Justifica las decisiones que has tomado en cuanto a las relaciones, teniendo en cuenta las normas descritas anteriormente y los casos de uso de nuestro programa.</p><p>Define las colecciones que debemos crear y haz un ejemplo de documento JSON para cada una de ellas.</p><p>Puedes descargar el enunciado en este <a href="/DevTacora/assets/files/Ejercicio relaciones. Misiones-03e4260a59fbe1abe32e309026fc0f6e.pdf" target="_blank">enlace</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="solución">Solución<a href="#solución" class="hash-link" aria-label="Enlace directo al Solución" title="Enlace directo al Solución">​</a></h4><p><strong>Análisis inicial:</strong></p><ul>
<li>La mayoría de casos de uso están centrados en las Misiones (3 - 7). Esta será la entidad principal.</li>
<li>Necesitamos tener acceso fácil a los usuarios para insertarlos y cambiar su nombre de usuario.</li>
<li>Necesitamos tener acceso fácil a las recompensas para mostrarlas en el caso de uso 3.</li>
</ul><p><strong>Relación N<!-- -->:M<!-- --> Jugador - Misión:</strong></p><ol>
<li>
<p><strong>¿Desde el jugador necesito saber las misiones?</strong> No, no hay ningún caso de uso</p>
</li>
<li>
<p><strong>¿Desde las misiones necesito saber las misiones?</strong> Sí, casos de uso 5 y 7</p>
</li>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>sí</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>muchos</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>siempre</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>sí</strong>, usa referenciado. (Podemos asignar y rechazar misiones a los Jugadores)</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>no</strong>, usa embebido. La otra entidad, Recompensa no necesita saber nada de los Jugadores.</p>
</li>
</ol><p>Analizando las respuestas, es preferible el <strong>uso de referenciado</strong>, de forma que la Misión almacena la lista de Jugadores asignados.</p><p><strong>Relación 1<!-- -->:N<!-- --> Misión - Recompensa:</strong></p><p>Una misión tiene asignada una recompensa pero una recompensa puede estar en varias misiones.</p><ol>
<li>
<p><strong>¿Desde la misión necesito saber las recompensas?</strong> Sí, caso de uso 7.</p>
</li>
<li>
<p><strong>¿Desde las recompensas necesito saber las misiones?</strong> Sí, caso de uso 8. ¿Relación bidireccional?</p>
</li>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>sí</strong>, usa referenciado. En el caso de uso 8 tengo que mostrar las recompensas.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>pocos</strong> (desde el punto de vista de Misión), usa embebido. Si <strong>muchos</strong> (desde el punto de vista de Recompensa), usa referenciado.</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>a veces</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>sí</strong>, usa referenciado. (Podemos cambiar las recompensas de las misiones)</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>no</strong>, usa embebido. La otra entidad, Jugador no necesita saber nada de las Recompensas.</p>
</li>
</ol><p>Si analizamos las respuestas, <strong>es preferible el referenciado</strong>, teniendo Misión la referencia de la Recompensa asignada. Además, podemos hacer la relación bidireccional, teniendo Recompensa una lista de las Misiones en la que está asignada.</p><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>CUIDADO CON LAS RELACIONES BIDIRECCIONALES</div><div class="admonitionContent_BuS1"><p>Podemos hacer relaciones bidireccionales, pero siendo conscientes que hay que tener mucho cuidado en las actualizaciones de la relación, modificando los valores en ambas colecciones; en caso contrario, podemos producir inconsistencia de datos.
Si la opción 8 se va a ejecutar con poca frecuencia, podemos hacer la relación unidireccional y soportar las consultas de unión a la hora de mostrar las misiones que tienen asignadas esa recompensa.</p></div></div><p><strong>Ejemplos de documentos:</strong></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Jugadores</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;j1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Identificador único del jugador</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Juan Pérez&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Misiones</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;m1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Identificador único de la misión</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Salvar la aldea&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Rescatar a los aldeanos de los enemigos.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;recompensa_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;r1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Referencia a la recompensa asociada</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;jugadores_ids&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;j1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;j2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Referencias a los jugadores asignados</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Recompensas</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;r1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Identificador único de la recompensa</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Espada legendaria&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Una poderosa espada mágica.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;misiones_ids&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;m1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;m3&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Referencias a las misiones que otorgan esta recompensa</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejercicio-2-stardam-valley-v2">Ejercicio 2: Stardam Valley (v2)<a href="#ejercicio-2-stardam-valley-v2" class="hash-link" aria-label="Enlace directo al Ejercicio 2: Stardam Valley (v2)" title="Enlace directo al Ejercicio 2: Stardam Valley (v2)">​</a></h3><p>Realiza el mismo proceso que en el ejercicio anterior para la base de datos de Stardam Valley v2.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejercicio-3-gestión-de-pedidos-de-una-tienda">Ejercicio 3: Gestión de Pedidos de una Tienda<a href="#ejercicio-3-gestión-de-pedidos-de-una-tienda" class="hash-link" aria-label="Enlace directo al Ejercicio 3: Gestión de Pedidos de una Tienda" title="Enlace directo al Ejercicio 3: Gestión de Pedidos de una Tienda">​</a></h3><p>La tienda de sofás <strong>&quot;Tapizados Ágora&quot;</strong> necesita diseñar una base de datos NoSQL para gestionar la información relacionada con su catálogo de productos, clientes, pedidos y entregas.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="información-a-gestionar">Información a gestionar<a href="#información-a-gestionar" class="hash-link" aria-label="Enlace directo al Información a gestionar" title="Enlace directo al Información a gestionar">​</a></h4><p>La empresa necesita almacenar los siguientes datos:</p><ol>
<li>
<p>De los <strong>Clientes</strong> conocemos:</p>
<ul>
<li>Identificador único del cliente.</li>
<li>Nombre y apellidos.</li>
<li>Correo electrónico.</li>
<li>Dirección(es) (pueden tener múltiples direcciones, por ejemplo, casa y oficina). De cada dirección conocemos código postal, calle y número.</li>
</ul>
</li>
<li>
<p><strong>Sofás (Productos):</strong></p>
<ul>
<li>Nombre del modelo (e.g., &quot;Sofá Relax 3000&quot;).</li>
<li>Descripción (e.g., &quot;Un sofá reclinable con tapizado de cuero&quot;).</li>
<li>Precio.</li>
<li>Stock disponible.</li>
</ul>
</li>
<li>
<p>Por cada <strong>Pedido</strong> que realicen los clientes almacenaremos:</p>
<ul>
<li>Fecha del pedido.</li>
<li>Productos solicitados (cantidad, modelo).</li>
<li>Precio total del pedido.</li>
<li>Estado del pedido (pendiente, en preparación, enviado, entregado).</li>
<li>Dirección de entrega asociada al cliente.</li>
</ul>
</li>
<li>
<p>Por último, almacenaremos los estados de las <strong>entregas</strong> de los pedidos:</p>
<ul>
<li>Fecha estimada de entrega.</li>
<li>Transportista asignado.</li>
<li>Estado de la entrega (pendiente, en tránsito, entregado).</li>
</ul>
</li>
</ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="casos-de-uso">Casos de uso<a href="#casos-de-uso" class="hash-link" aria-label="Enlace directo al Casos de uso" title="Enlace directo al Casos de uso">​</a></h4><p>La aplicación Java que vamos a desarrollar ofrecerá las siguientes opciones:</p><ol>
<li>
<p><strong>Consulta del catálogo de productos:</strong></p>
<ul>
<li>Mostrar a los clientes los modelos de sofás disponibles, su descripción, precios, y stock.</li>
<li>Permitirá búsquedas por nombre, tapiz o rango de precios.</li>
</ul>
</li>
<li>
<p><strong>Gestión de pedidos:</strong></p>
<ul>
<li>Al crear un pedido, se debe guardar la información del cliente, los productos seleccionados, la cantidad solicitada y el total del pedido. También se iniciará la entrega en estado pendiente.</li>
<li>Permitir consultar el estado del pedido en cualquier momento.</li>
</ul>
</li>
<li>
<p><strong>Consulta del historial de pedidos del cliente:</strong></p>
<ul>
<li>Mostrar todos los pedidos realizados por un cliente, con los detalles de cada pedido (fecha, sofás comprados, precio de cada sofá, total). También se deberá mostrar el nombre, correo y direcciones del cliente.</li>
</ul>
</li>
<li>
<p><strong>Seguimiento de entregas:</strong></p>
<ul>
<li>Consultar la fecha estimada de entrega y el estado del envío de un pedido.</li>
<li>Registrar actualizaciones sobre el estado de una entrega.</li>
</ul>
</li>
<li>
<p><strong>Control del stock:</strong></p>
<ul>
<li>Reducir automáticamente el stock de los productos al registrar un pedido.</li>
<li>Mostrar los sofás con bajo stock para reposición.</li>
</ul>
</li>
<li>
<p><strong>Gestión de precios:</strong></p>
</li>
</ol><ul>
<li>Modificar el precio de los productos.</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tareas-a-realizar">Tareas a realizar<a href="#tareas-a-realizar" class="hash-link" aria-label="Enlace directo al Tareas a realizar" title="Enlace directo al Tareas a realizar">​</a></h4><p>Diseña la base de datos utilizando un enfoque NoSQL y justificando si se usarán documentos embebidos, referencias o colecciones intermedias para cada tipo de relación. Crea un fichero JSON de ejemplo para cada colección que crees.</p><div class="hidden-summary"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="solución-1">Solución<a href="#solución-1" class="hash-link" aria-label="Enlace directo al Solución" title="Enlace directo al Solución">​</a></h4><p><strong>Entidades</strong>: Cliente, Dirección, Pedido, Producto y Entrega.</p><p><strong>Relaciones</strong>:</p><ul>
<li>Cliente - (1<!-- -->:N<!-- -->) - Dirección</li>
<li>Cliente - (1<!-- -->:N<!-- -->) - Pedido</li>
<li>Pedido - (N<!-- -->:M<!-- -->) - Producto</li>
<li>Pedido - (1:1) - Entrega</li>
</ul><p><strong>Entidades principales</strong>: Pedido y Producto. (La mayoría de operaciones se realizan sobre estas dos entidades)</p><p>Comenzamos a valorar las relaciones:</p><p><strong>Cliente - (1<!-- -->:N<!-- -->) - Dirección</strong>:</p><ol>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>pocos</strong>, usa embebido. (Se entiende que una persona no tendrá más de 5 direcciones)</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>siempre</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>sí</strong>, usa referenciado.</p>
</li>
</ol><p>Conclusión: <strong>EMBEBIDO</strong>.</p><p><strong>Cliente - (1<!-- -->:N<!-- -->) - Pedido</strong>:</p><ol>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>sí</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>muchos</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>a veces</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>sí</strong>, usa embebido. (No será con frecuencia pero un usuario puede actualizar su correo, dirección... Nos interesa independencia)</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
</ol><p>Conclusión: <strong>REFERENCIADO</strong>. ¿Bidireccional o unidireccional?</p><ul>
<li>¿El cliente necesita saber sus pedidos? Caso de uso 3</li>
<li>¿El pedido necesita conocer el cliente que lo ha realizado? Igual que en SQL, la entidad N es la que debería tener la referencia de la entidad 1.
Se puede hacer bidireccional o guardar solo en el pedido el id del cliente.</li>
</ul><p><strong>Pedido - (N<!-- -->:M<!-- -->) - Producto</strong>:</p><ol>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>sí</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>muchos</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>a veces</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>sí</strong>, usa referenciado. (Se puede actualizar stock, precio...)</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
</ol><p>Conclusión: <strong>REFERENCIADO</strong>. No tiene sentido que sea bidireccional. El pedido contendrá la lista de productos elegidos.</p><p><strong>Pedido - (1:1) - Entrega</strong>:</p><ol>
<li>
<p><strong>¿Los datos relacionados son independientes?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Cuántos datos relacionados hay?</strong> Si <strong>pocos</strong>, usa embebido.</p>
</li>
<li>
<p><strong>¿Qué tan frecuentemente se consultan juntos?</strong> Si <strong>a veces</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Los datos cambian frecuentemente?</strong> Si <strong>sí</strong>, usa referenciado.</p>
</li>
<li>
<p><strong>¿Los datos son reutilizables por otros documentos?</strong> Si <strong>no</strong>, usa embebido.</p>
</li>
</ol><p>Conclusión: <strong>EMBEBIDO</strong></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Cliente</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Juan Pérez&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;correo&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;juan@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;direcciones&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;codigoPostal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;28001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;calle&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Calle Mayor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;numero&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;codigoPostal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;28002&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;calle&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Avenida Sol&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;numero&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Pedido</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fecha&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-01-15&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;cliente_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;direccion_entrega&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;codigoPostal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;28001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;calle&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Calle Mayor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;numero&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;productos&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;producto_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;cantidad&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;precio&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;producto_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;cantidad&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;precio&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;precioTotal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;estado&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pendiente&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;entrega&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fechaEstimada&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-01-20&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;transportista&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DHL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;estado&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pendiente&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>En la colección pedido se ha vuelto a incluir la <strong>dirección</strong> del cliente porque, a futuro, el cliente puede cambiar su dirección pero el pedido ya se entregó. También se ha incluido el <strong>precio de cada producto</strong> por el mismo motivo, porque los productos pueden cambiar de precio con el tiempo pero nos interesa saber cuánto le costó al cliente.</p></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Colección Catálogo</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nombre&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sofá Relax 3000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;descripcion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Un sofá reclinable con tapizado de cuero&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;precio&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;stock&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Página del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/conexion-java"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Conexión desde Java</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/DevTacora/docs/ada_2425/ut5_bbdd_nosql/mongodb/gestion-relaciones-Java"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">Gestión de relaciones en Java</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-metodología-de-diseño-de-bases-de-datos-documentales" class="table-of-contents__link toc-highlight">1. Metodología de diseño de bases de datos documentales</a><ul><li><a href="#11-análisis-de-requisitos-y-modelo-de-datos" class="table-of-contents__link toc-highlight">1.1. Análisis de Requisitos y Modelo de Datos</a></li><li><a href="#12-elección-entre-modelado-embebido-o-normalizado" class="table-of-contents__link toc-highlight">1.2. Elección entre Modelado Embebido o Normalizado</a></li><li><a href="#13-indexación-y-optimización-de-consultas" class="table-of-contents__link toc-highlight">1.3. Indexación y Optimización de Consultas</a></li><li><a href="#14-estrategias-de-particionamiento-y-replicación" class="table-of-contents__link toc-highlight">1.4. Estrategias de Particionamiento y Replicación</a></li></ul></li><li><a href="#2-modelado-de-relaciones-en-mongodb" class="table-of-contents__link toc-highlight">2. Modelado de Relaciones en MongoDB</a><ul><li><a href="#21-relación-11" class="table-of-contents__link toc-highlight">2.1. Relación 1:1</a></li><li><a href="#22-relación-1n-uno-a-muchos" class="table-of-contents__link toc-highlight">2.2. Relación 1:N (Uno a Muchos)</a></li><li><a href="#23-relación-nm-muchos-a-muchos" class="table-of-contents__link toc-highlight">2.3. Relación N:M (Muchos a Muchos)</a></li><li><a href="#resumen-práctico" class="table-of-contents__link toc-highlight">Resumen práctico</a></li><li><a href="#reglas-generales-para-tomar-decisiones" class="table-of-contents__link toc-highlight">Reglas generales para tomar decisiones</a></li></ul></li><li><a href="#ejercicios" class="table-of-contents__link toc-highlight">Ejercicios</a><ul><li><a href="#ejercicio-1-misiones" class="table-of-contents__link toc-highlight">Ejercicio 1: Misiones</a></li><li><a href="#ejercicio-2-stardam-valley-v2" class="table-of-contents__link toc-highlight">Ejercicio 2: Stardam Valley (v2)</a></li><li><a href="#ejercicio-3-gestión-de-pedidos-de-una-tienda" class="table-of-contents__link toc-highlight">Ejercicio 3: Gestión de Pedidos de una Tienda</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <section classname="bg-white border-t border-gray-100">
      <div classname="max-w-4xl mx-auto px-6 py-16 text-center">
        <h3 classname="text-2xl font-bold text-gray-900 mb-4">
          Construyendo conocimiento, línea por línea
        </h3>
        <p classname="text-gray-600 leading-relaxed">
          © 2025 Alicia Cámara Casares - Contenido bajo licencia 
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer" classname="text-blue-600 hover:text-blue-700 underline">
                CC BY-NC-SA 4.0
              </a>.
        </p>
      </div>
    </section>
      </div></div></div></footer></div>
</body>
</html>