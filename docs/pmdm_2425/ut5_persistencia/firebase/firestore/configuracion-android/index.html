<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Configuración de Firestore en Android | DevTacora</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://acamarac02.github.io/DevTacora/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://acamarac02.github.io/DevTacora/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuración de Firestore en Android | DevTacora"><meta data-rh="true" name="description" content="Antes de poder utilizar Cloud Firestore en una aplicación Android, es necesario configurar correctamente Firebase en el proyecto. En este apartado veremos los pasos detallados para:"><meta data-rh="true" property="og:description" content="Antes de poder utilizar Cloud Firestore en una aplicación Android, es necesario configurar correctamente Firebase en el proyecto. En este apartado veremos los pasos detallados para:"><link data-rh="true" rel="icon" href="/DevTacora/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android"><link data-rh="true" rel="alternate" href="https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android" hreflang="es"><link data-rh="true" rel="alternate" href="https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"UT5. Persistencia de datos","item":"https://acamarac02.github.io/DevTacora/docs/category/ut5-persistencia-de-datos"},{"@type":"ListItem","position":2,"name":"Firebase","item":"https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/"},{"@type":"ListItem","position":3,"name":"Firestore Database","item":"https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/"},{"@type":"ListItem","position":4,"name":"Configuración de Firestore","item":"https://acamarac02.github.io/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android"}]}</script><link rel="alternate" type="application/rss+xml" href="/DevTacora/blog/rss.xml" title="DevTacora RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/DevTacora/blog/atom.xml" title="DevTacora Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WCKN9ZY1F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WCKN9ZY1F",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/DevTacora/assets/css/styles.93fe5485.css">
<script src="/DevTacora/assets/js/runtime~main.23c7aa65.js" defer="defer"></script>
<script src="/DevTacora/assets/js/main.717bf0da.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Principal" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Alternar barra lateral" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/DevTacora/"><div class="navbar__logo"><img src="/DevTacora/img/devtacora_logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/DevTacora/img/devtacora_logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DevTacora</b></a><a class="navbar__item navbar__link" href="/DevTacora/docs/pia_2526/">PIA</a><a class="navbar__item navbar__link" href="/DevTacora/docs/pmdm_2526/">PMDM</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/DevTacora/docs/licencia">Licencia</a><a href="https://www.linkedin.com/in/aliciacamcas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Cambiar entre modo oscuro y claro (actualmente system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra lateral de Documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/DevTacora/docs/category/ut5-persistencia-de-datos">UT5. Persistencia de datos</a><button aria-label="Colapsar categoría &#x27;UT5. Persistencia de datos&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/introduccion">Introducción</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/room/">Room</a><button aria-label="Ampliar la categoría &#x27;Room&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/shared-preferences">Shared preferences</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/">Firebase</a><button aria-label="Colapsar categoría &#x27;Firebase&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/authentication/">Firebase Authentication</a><button aria-label="Ampliar la categoría &#x27;Firebase Authentication&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/">Firestore Database</a><button aria-label="Colapsar categoría &#x27;Firestore Database&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android">Configuración de Firestore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/operaciones-crud">Operaciones CRUD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/lectura-tiempo-real">Lectura en Tiempo Real</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/gestion-subcolecciones">Gestión de Subcolecciones</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/demo-tablon-anuncios">Demo Tablón de Anuncios</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/supabase-storage/">Supabase Storage</a><button aria-label="Ampliar la categoría &#x27;Supabase Storage&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Rastro de navegación"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Página de Inicio" class="breadcrumbs__link" href="/DevTacora/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/DevTacora/docs/category/ut5-persistencia-de-datos"><span>UT5. Persistencia de datos</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/"><span>Firebase</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/"><span>Firestore Database</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Configuración de Firestore</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta página</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuración de Firestore en Android</h1></header><div class="justify-text"><p>Antes de poder utilizar <strong>Cloud Firestore</strong> en una aplicación Android, es necesario configurar correctamente Firebase en el proyecto. En este apartado veremos los pasos detallados para:</p><p>1️⃣ Crear un proyecto en Firebase<br>
<!-- -->2️⃣ Habilitar Firestore Database<br>
<!-- -->3 ️⃣ Agregar Firestore a la app Android<br>
<!-- -->4️⃣ Configurar permisos y reglas de seguridad</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-1-crear-un-proyecto-en-firebase">🔹 1. Crear un proyecto en Firebase<a href="#-1-crear-un-proyecto-en-firebase" class="hash-link" aria-label="Enlace directo al 🔹 1. Crear un proyecto en Firebase" title="Enlace directo al 🔹 1. Crear un proyecto en Firebase">​</a></h2><p>Para comenzar, sigue los mismos pasos que cuando estudiamos <em>Authentication</em>, es decir, accede a la consola de Firebase, crea un proyecto nuevo y realiza la configuración básica que indica el asistente. Finalmente, descarga el archivo <code>google-services.json</code> y pégalo en la carpeta <code>app</code> de tu proyecto.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-2-habilitar-firestore-database">🔹 2. Habilitar Firestore Database<a href="#-2-habilitar-firestore-database" class="hash-link" aria-label="Enlace directo al 🔹 2. Habilitar Firestore Database" title="Enlace directo al 🔹 2. Habilitar Firestore Database">​</a></h2><p>Una vez creado el proyecto en Firebase, es necesario <strong>habilitar Firestore</strong> para que la aplicación pueda interactuar con la base de datos.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-1-acceder-a-firestore-en-la-consola-de-firebase">Paso 1: Acceder a Firestore en la consola de Firebase<a href="#paso-1-acceder-a-firestore-en-la-consola-de-firebase" class="hash-link" aria-label="Enlace directo al Paso 1: Acceder a Firestore en la consola de Firebase" title="Enlace directo al Paso 1: Acceder a Firestore en la consola de Firebase">​</a></h3><ol>
<li>En la <a href="https://console.firebase.google.com/" target="_blank" rel="noopener noreferrer">Consola de Firebase</a>, selecciona tu proyecto.</li>
<li>En el menú lateral, haz clic en <strong>&quot;Firestore Database&quot;</strong>.</li>
</ol><p><img decoding="async" loading="lazy" alt="Iniciar Firestore" src="/DevTacora/assets/images/firestore-menu-4276ccf6202724dfed5c3f7874486f6b.png" width="486" height="1104" class="img_ev3q">
3. Pulsa el botón <strong>&quot;Crear Base de Datos&quot;</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-2-seleccionar-la-ubicación-de-firestore">Paso 2: Seleccionar la ubicación de Firestore<a href="#paso-2-seleccionar-la-ubicación-de-firestore" class="hash-link" aria-label="Enlace directo al Paso 2: Seleccionar la ubicación de Firestore" title="Enlace directo al Paso 2: Seleccionar la ubicación de Firestore">​</a></h3><ol>
<li>Firebase te pedirá que selecciones la <strong>región</strong> donde se almacenarán los datos.</li>
<li>Se recomienda elegir una ubicación cercana a la mayoría de tus usuarios para mejorar el rendimiento.<br>
<img decoding="async" loading="lazy" alt="Ubicación Firestore" src="/DevTacora/assets/images/ubicacion-firestore-c98d5481ddda01aed0bb721716245202.png" width="1658" height="990" class="img_ev3q"></li>
</ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-3-elegir-el-modo-de-seguridad">Paso 3: Elegir el modo de seguridad<a href="#paso-3-elegir-el-modo-de-seguridad" class="hash-link" aria-label="Enlace directo al Paso 3: Elegir el modo de seguridad" title="Enlace directo al Paso 3: Elegir el modo de seguridad">​</a></h3><p>Firebase te preguntará cómo deseas configurar la seguridad inicial de Firestore. Hay dos opciones:</p><ol>
<li>
<p><strong>Modo de prueba (recomendado para desarrollo)</strong></p>
<ul>
<li>Permite acceso libre a la base de datos, sin autenticación.</li>
<li>Selecciona esta opción si solo estás probando Firestore (nuestro caso).</li>
<li>Las reglas se verán así:</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rules_version = &#x27;</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service cloud.firestore </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match /databases/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">database</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/documents </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match /</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">document=**</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> write</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> if </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Modo bloqueado (recomendado para producción)</strong></p>
<ul>
<li>Solo permite el acceso a usuarios autenticados o según reglas específicas.</li>
<li>Se recomienda para aplicaciones en producción.</li>
</ul>
</li>
</ol><p>📌 <strong>Ahora Firestore está activado y listo para usarse en tu app Android.</strong></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-3-agregar-firestore-a-la-app">🔹 3. Agregar Firestore a la app<a href="#-3-agregar-firestore-a-la-app" class="hash-link" aria-label="Enlace directo al 🔹 3. Agregar Firestore a la app" title="Enlace directo al 🔹 3. Agregar Firestore a la app">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-1-modificar-buildgradle-nivel-de-proyecto">Paso 1: Modificar <code>build.gradle</code> (nivel de proyecto)<a href="#paso-1-modificar-buildgradle-nivel-de-proyecto" class="hash-link" aria-label="Enlace directo al paso-1-modificar-buildgradle-nivel-de-proyecto" title="Enlace directo al paso-1-modificar-buildgradle-nivel-de-proyecto">​</a></h3><p>Abre el archivo <strong><code>build.gradle</code> (Proyecto: DemoFirestore)</strong> y asegúrate de que tengas el siguiente bloque en <code>plugins</code>:</p><div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add the dependency for the Google services Gradle plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id(&quot;com.google.gms.google-services&quot;) version &quot;4.4.2&quot; apply false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-2-modificar-buildgradle-nivel-de-módulo-app">Paso 2: Modificar <code>build.gradle</code> (nivel de módulo: app)<a href="#paso-2-modificar-buildgradle-nivel-de-módulo-app" class="hash-link" aria-label="Enlace directo al paso-2-modificar-buildgradle-nivel-de-módulo-app" title="Enlace directo al paso-2-modificar-buildgradle-nivel-de-módulo-app">​</a></h3><p>Abre el archivo <strong><code>build.gradle</code> (Módulo: app)</strong> y agrega las siguientes dependencias dentro de <code>dependencies</code>:</p><div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Firebase BoM (Bill of Materials) para gestionar versiones automáticamente</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(platform(&quot;com.google.firebase:firebase-bom:33.8.0&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Dependencia de Firestore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(&quot;com.google.firebase:firebase-firestore&quot;)</span><br></span></code></pre></div></div><p>Luego, en la parte superior del archivo, asegúrate de aplicar el plugin de Google Services:</p><div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id(&quot;com.google.gms.google-services&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-3-sincronizar-el-proyecto">Paso 3: Sincronizar el proyecto<a href="#paso-3-sincronizar-el-proyecto" class="hash-link" aria-label="Enlace directo al Paso 3: Sincronizar el proyecto" title="Enlace directo al Paso 3: Sincronizar el proyecto">​</a></h3><ul>
<li>Guarda los cambios y haz clic en <strong>&quot;Sync Now&quot;</strong> en la parte superior de Android Studio.</li>
<li>Asegúrate de que la sincronización se realice sin errores.</li>
</ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-4-configurar-permisos-y-reglas-de-seguridad">🔹 4. Configurar permisos y reglas de seguridad<a href="#-4-configurar-permisos-y-reglas-de-seguridad" class="hash-link" aria-label="Enlace directo al 🔹 4. Configurar permisos y reglas de seguridad" title="Enlace directo al 🔹 4. Configurar permisos y reglas de seguridad">​</a></h2><p>Firestore permite definir <strong>reglas de seguridad</strong> para controlar quién puede leer y escribir en la base de datos. Ya las configuramos al crear la base de datos pero aquí se explican brevemente por si necesitas aplicarlas en tus proyectos. Nosotros de momento dejaremos la base de datos abierta a cualquiera.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-1-acceder-a-las-reglas-en-la-consola-de-firebase">Paso 1: Acceder a las reglas en la consola de Firebase<a href="#paso-1-acceder-a-las-reglas-en-la-consola-de-firebase" class="hash-link" aria-label="Enlace directo al Paso 1: Acceder a las reglas en la consola de Firebase" title="Enlace directo al Paso 1: Acceder a las reglas en la consola de Firebase">​</a></h3><ol>
<li>Ve a la <strong>Consola de Firebase</strong>.</li>
<li>En la barra lateral, selecciona <strong>&quot;Firestore Database&quot;</strong>.</li>
<li>Haz clic en <strong>&quot;Reglas&quot;</strong>.</li>
</ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paso-2-configurar-reglas-de-acceso">Paso 2: Configurar reglas de acceso<a href="#paso-2-configurar-reglas-de-acceso" class="hash-link" aria-label="Enlace directo al Paso 2: Configurar reglas de acceso" title="Enlace directo al Paso 2: Configurar reglas de acceso">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-reglas-de-seguridad-básicas-modo-abierto---solo-para-pruebas">🔐 <strong>Reglas de seguridad básicas (Modo abierto - solo para pruebas)</strong><a href="#-reglas-de-seguridad-básicas-modo-abierto---solo-para-pruebas" class="hash-link" aria-label="Enlace directo al -reglas-de-seguridad-básicas-modo-abierto---solo-para-pruebas" title="Enlace directo al -reglas-de-seguridad-básicas-modo-abierto---solo-para-pruebas">​</a></h4><p>Si solo quieres permitir <strong>lectura y escritura para todos</strong> (no recomendado en producción):</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rules_version = &#x27;</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service cloud.firestore </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match /databases/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">database</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/documents </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match /</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">document=**</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> write</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> if </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>🚨 <strong>¡Cuidado!</strong> Esta configuración permite que cualquiera pueda leer y escribir datos. Solo úsala en desarrollo.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-reglas-seguras-con-autenticación-recomendado">🔐 <strong>Reglas seguras con autenticación (Recomendado)</strong><a href="#-reglas-seguras-con-autenticación-recomendado" class="hash-link" aria-label="Enlace directo al -reglas-seguras-con-autenticación-recomendado" title="Enlace directo al -reglas-seguras-con-autenticación-recomendado">​</a></h4><p>Para permitir acceso solo a usuarios autenticados con Firebase Authentication:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rules_version = &#x27;</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service cloud.firestore </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match /databases/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">database</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/documents </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match /users/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> write</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> if request.auth != </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> &amp;&amp; request.auth.uid == userId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>🔹 <strong>Explicación:</strong></p><ul>
<li>Solo los usuarios autenticados (<code>request.auth != null</code>) pueden acceder.</li>
<li>Un usuario solo puede acceder a sus propios documentos (<code>request.auth.uid == userId</code>).</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-reglas-para-una-colección-específica-ejemplo-pedidos-de-un-usuario">🔐 <strong>Reglas para una colección específica (Ejemplo: pedidos de un usuario)</strong><a href="#-reglas-para-una-colección-específica-ejemplo-pedidos-de-un-usuario" class="hash-link" aria-label="Enlace directo al -reglas-para-una-colección-específica-ejemplo-pedidos-de-un-usuario" title="Enlace directo al -reglas-para-una-colección-específica-ejemplo-pedidos-de-un-usuario">​</a></h4><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rules_version = &#x27;</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service cloud.firestore </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match /databases/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">database</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/documents </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match /orders/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">orderId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> write</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> if request.auth != </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>🔹 <strong>Esto significa que solo los usuarios autenticados pueden leer y escribir en la colección <code>/orders/</code></strong>.</p></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Página del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Firestore Database</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/operaciones-crud"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">Operaciones CRUD</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-1-crear-un-proyecto-en-firebase" class="table-of-contents__link toc-highlight">🔹 1. Crear un proyecto en Firebase</a></li><li><a href="#-2-habilitar-firestore-database" class="table-of-contents__link toc-highlight">🔹 2. Habilitar Firestore Database</a><ul><li><a href="#paso-1-acceder-a-firestore-en-la-consola-de-firebase" class="table-of-contents__link toc-highlight">Paso 1: Acceder a Firestore en la consola de Firebase</a></li><li><a href="#paso-2-seleccionar-la-ubicación-de-firestore" class="table-of-contents__link toc-highlight">Paso 2: Seleccionar la ubicación de Firestore</a></li><li><a href="#paso-3-elegir-el-modo-de-seguridad" class="table-of-contents__link toc-highlight">Paso 3: Elegir el modo de seguridad</a></li></ul></li><li><a href="#-3-agregar-firestore-a-la-app" class="table-of-contents__link toc-highlight">🔹 3. Agregar Firestore a la app</a><ul><li><a href="#paso-1-modificar-buildgradle-nivel-de-proyecto" class="table-of-contents__link toc-highlight">Paso 1: Modificar <code>build.gradle</code> (nivel de proyecto)</a></li><li><a href="#paso-2-modificar-buildgradle-nivel-de-módulo-app" class="table-of-contents__link toc-highlight">Paso 2: Modificar <code>build.gradle</code> (nivel de módulo: app)</a></li><li><a href="#paso-3-sincronizar-el-proyecto" class="table-of-contents__link toc-highlight">Paso 3: Sincronizar el proyecto</a></li></ul></li><li><a href="#-4-configurar-permisos-y-reglas-de-seguridad" class="table-of-contents__link toc-highlight">🔹 4. Configurar permisos y reglas de seguridad</a><ul><li><a href="#paso-1-acceder-a-las-reglas-en-la-consola-de-firebase" class="table-of-contents__link toc-highlight">Paso 1: Acceder a las reglas en la consola de Firebase</a></li><li><a href="#paso-2-configurar-reglas-de-acceso" class="table-of-contents__link toc-highlight">Paso 2: Configurar reglas de acceso</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <section classname="bg-white border-t border-gray-100">
      <div classname="max-w-4xl mx-auto px-6 py-16 text-center">
        <h3 classname="text-2xl font-bold text-gray-900 mb-4">
          Construyendo conocimiento, línea por línea
        </h3>
        <p classname="text-gray-600 leading-relaxed">
          © 2025 Alicia Cámara Casares - Contenido bajo licencia 
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer" classname="text-blue-600 hover:text-blue-700 underline">
                CC BY-NC-SA 4.0
              </a>.
        </p>
      </div>
    </section>
      </div></div></div></footer></div>
</body>
</html>