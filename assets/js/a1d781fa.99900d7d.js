"use strict";(self.webpackChunkpmdm=self.webpackChunkpmdm||[]).push([[3272],{8051:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/demo-postman-2-2a593c3c3ea1f3563c45419da5f0d7bc.png"},26587:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/endpoint-obtener-pokemon-a84364267e5225ac3da7b01cb8fbff63.png"},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>t});var a=n(96540);const o={},i=a.createContext(o);function r(e){const s=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:s},e.children)}},33560:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/demo-postman-1-d8ad18897ad0cf125fb6521e665c3490.png"},56555:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/respuesta-pokedex-043b38575145c199a4decc59268618f9.png"},60950:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"pmdm_2526/ut4_componentes_avanzados/analisis-pokeapi","title":"An\xe1lisis de la PokeAPI","description":"Estudio de los endpoints necesarios de la PokeAPI, su estructura JSON y c\xf3mo seleccionar y mapear \xfanicamente los datos relevantes para nuestra aplicaci\xf3n Android.","source":"@site/docs/01_pmdm_2526/ut4_componentes_avanzados/2-analisis-pokeapi.md","sourceDirName":"01_pmdm_2526/ut4_componentes_avanzados","slug":"/pmdm_2526/ut4_componentes_avanzados/analisis-pokeapi","permalink":"/DevTacora/docs/pmdm_2526/ut4_componentes_avanzados/analisis-pokeapi","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"An\xe1lisis de la PokeAPI","sidebar_position":2,"description":"Estudio de los endpoints necesarios de la PokeAPI, su estructura JSON y c\xf3mo seleccionar y mapear \xfanicamente los datos relevantes para nuestra aplicaci\xf3n Android.","keywords":["PokeAPI","API","JSON","Endpoints","Pok\xe9mon","Retrofit","Android","Mapeo","JSON a Java","An\xe1lisis"]},"sidebar":"pmdm_2526_Sidebar","previous":{"title":"Introducci\xf3n a las API REST","permalink":"/DevTacora/docs/pmdm_2526/ut4_componentes_avanzados/api-rest"},"next":{"title":"Arquitectura de la aplicaci\xf3n","permalink":"/DevTacora/docs/pmdm_2526/ut4_componentes_avanzados/arquitectura-aplicacion"}}');var o=n(74848),i=n(28453);const r={title:"An\xe1lisis de la PokeAPI",sidebar_position:2,description:"Estudio de los endpoints necesarios de la PokeAPI, su estructura JSON y c\xf3mo seleccionar y mapear \xfanicamente los datos relevantes para nuestra aplicaci\xf3n Android.",keywords:["PokeAPI","API","JSON","Endpoints","Pok\xe9mon","Retrofit","Android","Mapeo","JSON a Java","An\xe1lisis"]},t=void 0,d={},c=[{value:"URL base",id:"url-base",level:2},{value:"Endpoint obtener Pok\xe9mon",id:"endpoint-obtener-pok\xe9mon",level:2},{value:"Ejemplo endpoint para Pikachu",id:"ejemplo-endpoint-para-pikachu",level:3},{value:"An\xe1lisis de la respuesta JSON",id:"an\xe1lisis-de-la-respuesta-json",level:3},{value:"Endpoint obtener Pok\xe9dex",id:"endpoint-obtener-pok\xe9dex",level:2}];function l(e){const s={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)("div",{class:"justify-text",children:[(0,o.jsxs)(s.p,{children:["Antes de comenzar el desarrollo de nuestra aplicaci\xf3n, es fundamental ",(0,o.jsx)(s.strong,{children:"analizar qu\xe9 informaci\xf3n ofrece la API REST"})," que vamos a utilizar. Nuestra app debe construirse en funci\xf3n de los datos disponibles."]}),(0,o.jsxs)(s.p,{children:["En este caso, vamos a trabajar con la ",(0,o.jsx)(s.strong,{children:"PokeAPI"}),", cuya ",(0,o.jsx)(s.a,{href:"https://pokeapi.co/docs/v2",children:"documentaci\xf3n oficial"})," describe todos los recursos que expone.\nLa app tendr\xe1 estas dos funcionalidades principales:"]}),(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Buscador"})," de un Pok\xe9mon por su nombre."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Pok\xe9dex"})," que muestre todos los Pok\xe9mon en forma de lista, con navegaci\xf3n al detalle al pulsar uno de ellos."]}),"\n"]}),(0,o.jsx)(s.p,{children:"Para poder implementarlas, primero debemos entender c\xf3mo funciona la API y qu\xe9 endpoints necesitamos."}),(0,o.jsx)(s.hr,{}),(0,o.jsx)(s.h2,{id:"url-base",children:"URL base"}),(0,o.jsxs)(s.p,{children:["La ",(0,o.jsx)(s.a,{href:"https://pokeapi.co/docs/v2#resource-listspagination-section",children:"documentaci\xf3n de la PokeAPI"})," establece una ",(0,o.jsx)(s.strong,{children:"URL base"}),", sobre la cual a\xf1adiremos los diferentes recursos:"]}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"https://pokeapi.co/api/v2/\n"})}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Resumen documentaci\xf3n",src:n(70716).A+"",width:"2536",height:"720"})}),(0,o.jsx)(s.hr,{}),(0,o.jsx)(s.h2,{id:"endpoint-obtener-pok\xe9mon",children:"Endpoint obtener Pok\xe9mon"}),(0,o.jsx)(s.p,{children:"Dentro de los recursos disponibles, el que nos interesa para recuperar informaci\xf3n sobre un Pok\xe9mon concreto es:"}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Endpoint obtener Pokemon",src:n(26587).A+"",width:"1982",height:"360"})}),(0,o.jsxs)(s.p,{children:["Todo lo que aparece entre llaves ",(0,o.jsx)(s.code,{children:"{ }"})," es variable.\nEsto significa que podemos solicitar un Pok\xe9mon tanto por:"]}),(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["su ",(0,o.jsx)(s.strong,{children:"id"})," (por ejemplo, ",(0,o.jsx)(s.code,{children:"25"}),"),"]}),"\n",(0,o.jsxs)(s.li,{children:["como por su ",(0,o.jsx)(s.strong,{children:"nombre"})," (por ejemplo, ",(0,o.jsx)(s.code,{children:"pikachu"}),")."]}),"\n"]}),(0,o.jsx)(s.p,{children:"Este endpoint ser\xe1 la base para la funcionalidad de b\xfasqueda."}),(0,o.jsx)(s.hr,{}),(0,o.jsx)(s.h3,{id:"ejemplo-endpoint-para-pikachu",children:"Ejemplo endpoint para Pikachu"}),(0,o.jsxs)(s.p,{children:["Siguiendo el endpoint anterior, si queremos recuperar la informaci\xf3n de ",(0,o.jsx)(s.strong,{children:"Pikachu"}),", simplemente sustituimos ",(0,o.jsx)(s.code,{children:"{id or name}"})," por el valor correspondiente:"]}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"https://pokeapi.co/api/v2/pokemon/pikachu\n"})}),(0,o.jsxs)(s.p,{children:["Si abrimos esta URL en el navegador, veremos una respuesta en ",(0,o.jsx)(s.strong,{children:"formato JSON"}),", mostrando una gran cantidad de informaci\xf3n: estad\xedsticas, sprites, tipos, peso, altura, etc.\nEsta respuesta ser\xe1 la que posteriormente mapearemos a clases Java para usarla en Android."]}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Respuesta obtener pkm",src:n(66135).A+"",width:"1722",height:"1350"})}),(0,o.jsx)(s.hr,{}),(0,o.jsx)(s.h3,{id:"an\xe1lisis-de-la-respuesta-json",children:"An\xe1lisis de la respuesta JSON"}),(0,o.jsxs)(s.p,{children:["Para trabajar c\xf3modamente con el JSON devuelto por la API, se recomienda utilizar herramientas que permitan ",(0,o.jsx)(s.strong,{children:"formatear y explorar la estructura"}),". Uno de los clientes HTTP m\xe1s recomendados es Postman."]}),(0,o.jsx)(s.p,{children:"Con Postman podemos:"}),(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Introducir la URL del endpoint"}),"\n",(0,o.jsx)(s.li,{children:"Elegir el m\xe9todo HTTP (en este caso, GET)"}),"\n",(0,o.jsx)(s.li,{children:"Enviar la petici\xf3n"}),"\n",(0,o.jsx)(s.li,{children:"Visualizar la respuesta JSON de forma clara y legible"}),"\n"]}),(0,o.jsx)(s.p,{children:"Despu\xe9s de loguearte (puedes descargarte la app de escritorio o trabajar directamente en el navegador), seleccionamos Send an API request:"}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Demo postman 1",src:n(33560).A+"",width:"2812",height:"514"})}),(0,o.jsx)(s.p,{children:"Para cada petici\xf3n que quieras analizar, debes rellenar los siguientes datos:"}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Demo postman 2",src:n(8051).A+"",width:"2990",height:"482"})}),(0,o.jsxs)(s.p,{children:["Este paso es importante para ",(0,o.jsx)(s.strong,{children:"identificar correctamente qu\xe9 datos necesitamos"})," y facilitar el proceso de mapeo posterior. Esto nos permitir\xe1 crear ",(0,o.jsx)(s.strong,{children:"\xfanicamente las clases Java necesarias"}),", evitando mapear datos irrelevantes para nuestra aplicaci\xf3n."]}),(0,o.jsxs)(s.p,{children:["Ejemplo de respuesta a la URL ",(0,o.jsx)(s.a,{href:"https://pokeapi.co/api/v2/pokemon/pikachu",children:"https://pokeapi.co/api/v2/pokemon/pikachu"}),":"]}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Respuesta Pikachu",src:n(80896).A+"",width:"3004",height:"1354"})}),(0,o.jsx)(s.p,{children:"Aqu\xed tienes la admonici\xf3n en formato Markdown:"}),(0,o.jsx)(s.admonition,{type:"info",children:(0,o.jsxs)(s.p,{children:["No necesitas usar Postman si la documentaci\xf3n de la API ofrece ejemplos de respuesta, como sucede con la ",(0,o.jsx)(s.strong,{children:"PokeAPI"}),".",(0,o.jsx)(s.br,{}),"\n","En esos casos, puedes analizar el JSON directamente desde la propia documentaci\xf3n."]})}),(0,o.jsx)(s.hr,{}),(0,o.jsx)(s.h2,{id:"endpoint-obtener-pok\xe9dex",children:"Endpoint obtener Pok\xe9dex"}),(0,o.jsx)(s.p,{children:"Lo primero que debemos realizar es analizar qu\xe9 endpoint de la API nos ofrece todos los Pok\xe9mon."}),(0,o.jsxs)(s.p,{children:["En la siguiente imagen, sacada de la documentaci\xf3n, indican que para obtener todos los Pok\xe9mon, debemos llamar al mismo endpoint de antes pero sin un ",(0,o.jsx)(s.code,{children:"id"})," espec\xedfico."]}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"https://pokeapi.co/api/v2/pokemon\n"})}),(0,o.jsx)(s.p,{children:"Adem\xe1s, introduce los siguientes conceptos:"}),(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Paginaci\xf3n"}),": la PokeAPI funciona con paginaci\xf3n, es decir, en vez de cargar todos los Pok\xe9mon de golpe, te devuelve un n\xfamero determinado de ellos para no sobrecargar las aplicaciones con datos."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"\u201coffset\u201d"})," y ",(0,o.jsx)(s.strong,{children:"\u201climit\u201d"})," son par\xe1metros de la URL, de forma que con offset indicamos cu\xe1ntos Pok\xe9mon nos tenemos que saltar para empezar a devolver y con \u201climit\u201d indicamos cu\xe1ntos Pok\xe9mon nos debe devolver en la consulta. Por tanto, en la siguiente query que hagamos, nos saltaremos los primeros 20 Pok\xe9mon (que ya hemos recibido en esta query) y obtendremos los 20 siguientes (del 20 al 40)."]}),"\n"]}),(0,o.jsx)(s.p,{children:"Ejemplo de la primera query:"}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"https://pokeapi.co/api/v2/pokemon?offset=0&limit=20\n"})}),(0,o.jsx)(s.p,{children:"Ejemplo de la segunda query:"}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"https://pokeapi.co/api/v2/pokemon?offset=20&limit=20\n"})}),(0,o.jsx)(s.p,{children:"Y as\xed sucesivamente..."}),(0,o.jsx)(s.p,{children:"Ejemplo de respuesta:"}),(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Respuesta pokedex",src:n(56555).A+"",width:"1594",height:"818"})}),(0,o.jsxs)(s.p,{children:["En la respuesta del endpoint de la Pok\xe9dex, la PokeAPI ",(0,o.jsx)(s.strong,{children:"no devuelve la informaci\xf3n completa de cada Pok\xe9mon"}),".\nPor cada elemento de la lista solo recibimos dos datos: su ",(0,o.jsx)(s.strong,{children:"nombre"})," y la ",(0,o.jsx)(s.strong,{children:"URL de sus detalles"}),". Esto significa que si queremos mostrar informaci\xf3n adicional \u2014por ejemplo, la imagen del Pok\xe9mon, su tipo o altura\u2014 debemos realizar ",(0,o.jsx)(s.strong,{children:"una segunda petici\xf3n HTTP"})," usando esa URL individual para obtener sus datos completos. De esta forma, el proceso consiste en obtener primero la lista paginada y, despu\xe9s, ",(0,o.jsx)(s.strong,{children:"encadenar llamadas adicionales"})," para recuperar los detalles de cada Pok\xe9mon."]}),(0,o.jsx)(s.admonition,{title:"No todas las APIs implementan paginaci\xf3n.",type:"warning",children:(0,o.jsxs)(s.p,{children:["Antes de programar cualquier consulta que devuelva listas de elementos, revisa siempre la ",(0,o.jsx)(s.strong,{children:"documentaci\xf3n oficial"})," para confirmar si la API utiliza par\xe1metros como ",(0,o.jsx)(s.code,{children:"limit"}),", ",(0,o.jsx)(s.code,{children:"offset"}),", ",(0,o.jsx)(s.code,{children:"page"}),", ",(0,o.jsx)(s.code,{children:"cursor"}),", etc.",(0,o.jsx)(s.br,{}),"\n","Cada API puede gestionarlo de forma distinta o incluso no utilizar paginaci\xf3n."]})})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},66135:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/respuesta-obtener-pkm-a0b1ecde2556305c0f01c5d4e9f026d9.png"},70716:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/resumen-doc-ab94f7d2e068607ce4f9197eb295d9fd.png"},80896:(e,s,n)=>{n.d(s,{A:()=>a});const a=n.p+"assets/images/respuesta-pikachu-d666229df428dc8357370c338416a093.png"}}]);