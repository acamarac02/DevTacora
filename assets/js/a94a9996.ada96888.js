"use strict";(self.webpackChunkpmdm=self.webpackChunkpmdm||[]).push([[2323],{17016:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"pmdm_2526/ut5_persistencia/shared-preferences/conceptos-teoricos","title":"Conceptos te\xf3ricos","description":"SharedPreferences es una API de Android que permite almacenar datos clave-valor de manera persistente. Se usa para guardar configuraciones, preferencias del usuario o estados de la aplicaci\xf3n.","source":"@site/docs/01_pmdm_2526/ut5_persistencia/3-shared-preferences/1-conceptos-teoricos.md","sourceDirName":"01_pmdm_2526/ut5_persistencia/3-shared-preferences","slug":"/pmdm_2526/ut5_persistencia/shared-preferences/conceptos-teoricos","permalink":"/DevTacora/docs/pmdm_2526/ut5_persistencia/shared-preferences/conceptos-teoricos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Conceptos te\xf3ricos","title":"Conceptos te\xf3ricos"},"sidebar":"pmdm_2526_Sidebar","previous":{"title":"SharedPreferences","permalink":"/DevTacora/docs/category/sharedpreferences"},"next":{"title":"Demo de uso","permalink":"/DevTacora/docs/pmdm_2526/ut5_persistencia/shared-preferences/demo-uso"}}');var a=s(74848),i=s(28453);const o={sidebar_position:1,sidebar_label:"Conceptos te\xf3ricos",title:"Conceptos te\xf3ricos"},d=void 0,c={},l=[{value:"Uso de las SharedPreferences",id:"uso-de-las-sharedpreferences",level:2},{value:"Creaci\xf3n y almacenamiento de datos",id:"creaci\xf3n-y-almacenamiento-de-datos",level:3},{value:"Almacenamiento de datos",id:"almacenamiento-de-datos",level:3},{value:"Lectura de datos",id:"lectura-de-datos",level:3},{value:"Eliminaci\xf3n de datos",id:"eliminaci\xf3n-de-datos",level:3},{value:"Limpiar todas las preferencias",id:"limpiar-todas-las-preferencias",level:3},{value:"Tipos de datos que puedes guardar",id:"tipos-de-datos-que-puedes-guardar",level:3},{value:"Arquitectura",id:"arquitectura",level:2}];function t(e){const r={code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.code,{children:"SharedPreferences"})," es una API de Android que permite almacenar datos ",(0,a.jsx)(r.strong,{children:"clave-valor"})," de manera persistente. Se usa para guardar configuraciones, preferencias del usuario o estados de la aplicaci\xf3n."]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.strong,{children:"Ligero y r\xe1pido."})}),"\n",(0,a.jsxs)(r.li,{children:["Los datos se ",(0,a.jsx)(r.strong,{children:"mantienen incluso si la app se cierra o el dispositivo se reinicia"}),"."]}),"\n",(0,a.jsxs)(r.li,{children:["Ideal para guardar ",(0,a.jsx)(r.strong,{children:"datos peque\xf1os"})," como booleanos, strings, enteros o floats."]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["Algunos casos de uso de las ",(0,a.jsx)(r.code,{children:"SharedPreferences"})," pueden ser:"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Guardar configuraci\xf3n del usuario"})," (modo oscuro, idioma, etc.)."]}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.strong,{children:"Detectar primer acceso o tutorial completado."})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.strong,{children:"Guardar tokens o identificadores simples."})}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Estados de conmutadores"})," (",(0,a.jsx)(r.code,{children:"Switch"})," o ",(0,a.jsx)(r.code,{children:"CheckBox"}),")."]}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"uso-de-las-sharedpreferences",children:"Uso de las SharedPreferences"}),"\n",(0,a.jsx)(r.h3,{id:"creaci\xf3n-y-almacenamiento-de-datos",children:"Creaci\xf3n y almacenamiento de datos"}),"\n",(0,a.jsxs)(r.p,{children:["Recuperamos las ",(0,a.jsx)(r.code,{children:"SharedPreferences"})," con el m\xe9todo ",(0,a.jsx)(r.code,{children:"getSharedPreferences"}),", que espera dos par\xe1metros:"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Nombre del archivo"}),': "prefs" es simplemente el nombre del archivo donde se almacenar\xe1n los datos de ',(0,a.jsx)(r.code,{children:"SharedPreferences"}),". Puedes usar cualquier nombre de archivo que desees y este se guardar\xe1 en el almacenamiento interno de la app. Puedes tener m\xfaltiples archivos de preferencias, cada uno con un nombre diferente."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Modo de apertura"}),": ",(0,a.jsx)(r.code,{children:"MODE_PRIVATE"})," indica que las preferencias solo ser\xe1n accesibles por la aplicaci\xf3n que las cre\xf3. Es la forma m\xe1s segura y recomendada."]}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'// El MODE_PRIVATE indica que las preferencias solo ser\xe1n accesibles por la aplicaci\xf3n que las cre\xf3.\nSharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"almacenamiento-de-datos",children:"Almacenamiento de datos"}),"\n",(0,a.jsxs)(r.p,{children:["Para almacenar datos necesitamos un ",(0,a.jsx)(r.code,{children:"Editor"}),", a partir del cual usaremos los m\xe9todos ",(0,a.jsx)(r.code,{children:"putBoolean"}),", ",(0,a.jsx)(r.code,{children:"putString"}),", etc."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'// Editor para modificar los datos\nSharedPreferences.Editor editor = preferences.edit();\n\n// Guardar datos\neditor.putBoolean("primer_ingreso", true);\neditor.putString("usuario", "Juan");\neditor.putInt("nivel", 5);\neditor.apply();  // Guarda los cambios (as\xedncrono)\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"lectura-de-datos",children:"Lectura de datos"}),"\n",(0,a.jsxs)(r.p,{children:["Para la lectura podemos utilizar los m\xe9todos ",(0,a.jsx)(r.code,{children:"getBoolean"}),", ",(0,a.jsx)(r.code,{children:"getString"}),", etc. Como segundo par\xe1metro admite un valor por defecto, que se asignar\xe1 a la variable en caso de que la clave buscada no exista en las ",(0,a.jsx)(r.code,{children:"SharedPreferences"}),"."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'// Leer datos (con valores por defecto si no existe)\nboolean primerIngreso = preferences.getBoolean("primer_ingreso", false);\nString usuario = preferences.getString("usuario", "Desconocido");\nint nivel = preferences.getInt("nivel", 0);\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"eliminaci\xf3n-de-datos",children:"Eliminaci\xf3n de datos"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'editor.remove("usuario");  // Elimina una clave espec\xedfica\neditor.apply();\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"limpiar-todas-las-preferencias",children:"Limpiar todas las preferencias"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"editor.clear();  // Elimina TODAS las claves guardadas\neditor.apply();\n"})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"tipos-de-datos-que-puedes-guardar",children:"Tipos de datos que puedes guardar"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"String"})," \u2192 ",(0,a.jsx)(r.code,{children:'putString("clave", "valor")'})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Boolean"})," \u2192 ",(0,a.jsx)(r.code,{children:'putBoolean("clave", true)'})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Int"})," \u2192 ",(0,a.jsx)(r.code,{children:'putInt("clave", 10)'})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Float"})," \u2192 ",(0,a.jsx)(r.code,{children:'putFloat("clave", 5.5f)'})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Long"})," \u2192 ",(0,a.jsx)(r.code,{children:'putLong("clave", System.currentTimeMillis())'})]}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"arquitectura",children:"Arquitectura"}),"\n",(0,a.jsxs)(r.p,{children:["Vamos a usar ",(0,a.jsx)(r.strong,{children:"SharedPreferences"})," siguiendo el patr\xf3n que ya conocemos: ",(0,a.jsx)(r.strong,{children:"MVVM + Repository"}),". La idea es mantener una app ",(0,a.jsx)(r.strong,{children:"modular"}),", donde cada capa tenga una responsabilidad clara y donde la ",(0,a.jsx)(r.strong,{children:"UI (Fragment)"})," no se acople a detalles de almacenamiento."]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"Arquitectura SharedPreferences",src:s(62160).A+"",width:"2294",height:"1630"})})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},28453:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>d});var n=s(96540);const a={},i=n.createContext(a);function o(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:r},e.children)}},62160:(e,r,s)=>{s.d(r,{A:()=>n});const n=s.p+"assets/images/arquitectura-sp-462dae354109d09d317edc3096381119.png"}}]);