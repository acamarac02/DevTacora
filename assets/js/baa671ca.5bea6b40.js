"use strict";(self.webpackChunkpmdm=self.webpackChunkpmdm||[]).push([[8325],{1949:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"pmdm_2425/ut5_persistencia/firebase/authentication/demo-mail-pass","title":"Demo autenticaci\xf3n con email y contrase\xf1a","description":"Vamos a implementar una aplicaci\xf3n sencilla con una pantalla \xfanica de log in y registro. Una vez que el usuario se haya logueado, pasarmos a la pantalla principal de la aplicaci\xf3n.","source":"@site/docs/00_pmdm_2425/ut5_persistencia/4-firebase/1-authentication/1-demo-mail-pass.md","sourceDirName":"00_pmdm_2425/ut5_persistencia/4-firebase/1-authentication","slug":"/pmdm_2425/ut5_persistencia/firebase/authentication/demo-mail-pass","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/authentication/demo-mail-pass","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Autenticaci\xf3n con email y contrase\xf1a","title":"Demo autenticaci\xf3n con email y contrase\xf1a"},"sidebar":"pmdm_2425_Sidebar","previous":{"title":"Firebase Authentication","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/authentication/"},"next":{"title":"Autenticaci\xf3n con Google","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/authentication/demo-gmail"}}');var t=i(74848),o=i(28453);const r={sidebar_position:1,sidebar_label:"Autenticaci\xf3n con email y contrase\xf1a",title:"Demo autenticaci\xf3n con email y contrase\xf1a"},s=void 0,d={},l=[{value:"1. Configurar Firebase en tu Proyecto Android",id:"1-configurar-firebase-en-tu-proyecto-android",level:2},{value:"2. Dise\xf1o de la Interfaz de Usuario",id:"2-dise\xf1o-de-la-interfaz-de-usuario",level:2},{value:"Activity Login",id:"activity-login",level:3},{value:"Activity Principal",id:"activity-principal",level:3},{value:"3. Programar la l\xf3gica de usuarios",id:"3-programar-la-l\xf3gica-de-usuarios",level:2},{value:"Activity Login",id:"activity-login-1",level:3},{value:"M\xe9todo para Registrar Usuarios",id:"m\xe9todo-para-registrar-usuarios",level:4},{value:"M\xe9todo para el Inicio de Sesi\xf3n",id:"m\xe9todo-para-el-inicio-de-sesi\xf3n",level:4},{value:"M\xe9todo para navegar a la pantalla principal",id:"m\xe9todo-para-navegar-a-la-pantalla-principal",level:4},{value:"Activity Principal",id:"activity-principal-1",level:3},{value:"<strong>\ud83d\udccc Explicaci\xf3n del C\xf3digo</strong>",id:"-explicaci\xf3n-del-c\xf3digo",level:4}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)("div",{class:"justify-text",children:[(0,t.jsx)(n.p,{children:"Vamos a implementar una aplicaci\xf3n sencilla con una pantalla \xfanica de log in y registro. Una vez que el usuario se haya logueado, pasarmos a la pantalla principal de la aplicaci\xf3n."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"UT5. GIF resumen de la aplicaci\xf3n",src:i(59431).A+"",width:"420",height:"898"})}),(0,t.jsx)(n.h2,{id:"1-configurar-firebase-en-tu-proyecto-android",children:"1. Configurar Firebase en tu Proyecto Android"}),(0,t.jsx)(n.p,{children:"Antes de comenzar a programar, debes configurar Firebase en tu aplicaci\xf3n."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ud83d\udd39 Paso 1: Crear un Proyecto en Firebase"})}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Ve a la ",(0,t.jsx)(n.a,{href:"https://console.firebase.google.com/",children:"Firebase Console"})," y crea un nuevo proyecto."]}),"\n"]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Crear proyecto Firebase",src:i(26992).A+"",width:"3358",height:"2018"})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Agrega una aplicaci\xf3n ",(0,t.jsx)(n.strong,{children:"Android"})," e ingresa el ",(0,t.jsx)(n.strong,{children:"nombre del paquete"})," de tu app."]}),"\n"]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Agregar proyecto Android",src:i(30824).A+"",width:"3356",height:"1858"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Descarga el archivo ",(0,t.jsx)(n.strong,{children:"google-services.json"})," y col\xf3calo en ",(0,t.jsx)(n.code,{children:"app/"})," dentro de tu proyecto. Para ello, cambia la vista de Android a Proyecto en Android Studio. Puedes seguir las instrucciones del wizard."]}),"\n"]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Descargar Google Services JSON",src:i(4675).A+"",width:"3354",height:"1862"})}),(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["\ud83d\udd39 Paso 2: Agregar Dependencias de Firebase en ",(0,t.jsx)(n.code,{children:"build.gradle"})]}),"\nAbre el archivo ",(0,t.jsx)(n.code,{children:"build.gradle (Project Level)"})," y agrega el plugin de Google Services:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gradle",children:'plugins {\n    alias(libs.plugins.android.application) apply false\n\n    // Add the dependency for the Google services Gradle plugin\n    id("com.google.gms.google-services") version "4.4.2" apply false\n}\n'})}),(0,t.jsxs)(n.p,{children:["Luego, en ",(0,t.jsx)(n.code,{children:"build.gradle (Module: app)"}),", agrega el complemento de google-services y a\xf1ade las dependencias de Firebase Authentication:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gradle",children:'plugins {\n    alias(libs.plugins.android.application)\n    id("com.google.gms.google-services")\n}\n...\ndependencies {\n    // Firebase\n    implementation(platform("com.google.firebase:firebase-bom:33.8.0"))\n    // Firebase Authentication\n    implementation("com.google.firebase:firebase-auth")\n}\n'})}),(0,t.jsxs)(n.p,{children:["Despu\xe9s de esto, ",(0,t.jsx)(n.strong,{children:"sincroniza el proyecto"})," (",(0,t.jsx)(n.code,{children:"Sync Now"})," en Android Studio)."]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ud83d\udd39 Paso 3: Habilita el m\xe9todo de acceso"})}),(0,t.jsx)(n.p,{children:"En el panel de control, selecciona Compilaci\xf3n > Authentication."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Auth en el panel",src:i(70922).A+"",width:"484",height:"890"})}),(0,t.jsxs)(n.p,{children:["En la pesta\xf1a ",(0,t.jsx)(n.code,{children:"M\xe9todo de acceso"}),", habilita los proveedores con los que quieres permitir el acceso. En este caso, con email y contrase\xf1a."]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"M\xe9todos de acceso",src:i(26482).A+"",width:"3354",height:"1410"})}),(0,t.jsx)(n.p,{children:"Dentro de las dos opciones, en nuestra aplicaci\xf3n ser\xe1 obligatorio establecer una contrase\xf1a. Por tanto, solo habilitamos la primera opci\xf3n."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"M\xe9todo usuario y contrase\xf1a",src:i(21071).A+"",width:"2428",height:"1182"})}),(0,t.jsx)(n.hr,{}),(0,t.jsx)(n.h2,{id:"2-dise\xf1o-de-la-interfaz-de-usuario",children:"2. Dise\xf1o de la Interfaz de Usuario"}),(0,t.jsx)(n.h3,{id:"activity-login",children:"Activity Login"}),(0,t.jsxs)(n.p,{children:["En ",(0,t.jsx)(n.code,{children:"activity_login.xml"}),", crea una interfaz para el ",(0,t.jsx)(n.strong,{children:"registro e inicio de sesi\xf3n"}),"."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:'title="activity_login.xml"',children:'<LinearLayout\n    xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:app="http://schemas.android.com/apk/res-auto"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    android:gravity="center"\n    android:layout_gravity="center"\n    android:orientation="vertical"\n    android:padding="20dp"\n    tools:context=".MainActivity">\n\n    <LinearLayout\n        android:layout_width="match_parent"\n        android:layout_height="wrap_content"\n        android:gravity="center"\n        android:orientation="vertical"\n        android:padding="20dp">\n\n        \x3c!-- Campo de Correo Electr\xf3nico --\x3e\n        <com.google.android.material.textfield.TextInputLayout\n            android:layout_width="match_parent"\n            android:layout_height="wrap_content"\n            app:boxBackgroundMode="outline">\n\n            <com.google.android.material.textfield.TextInputEditText\n                android:id="@+id/emailEditText"\n                android:layout_width="match_parent"\n                android:layout_height="wrap_content"\n                android:hint="Correo Electr\xf3nico"\n                android:inputType="textEmailAddress"/>\n        </com.google.android.material.textfield.TextInputLayout>\n\n        \x3c!-- Campo de Contrase\xf1a --\x3e\n        <com.google.android.material.textfield.TextInputLayout\n            android:layout_width="match_parent"\n            android:layout_height="wrap_content"\n            android:layout_marginTop="10dp"\n            app:boxBackgroundMode="outline">\n\n            <com.google.android.material.textfield.TextInputEditText\n                android:id="@+id/passwordEditText"\n                android:layout_width="match_parent"\n                android:layout_height="wrap_content"\n                android:hint="Contrase\xf1a"\n                android:inputType="textPassword"/>\n        </com.google.android.material.textfield.TextInputLayout>\n\n        \x3c!-- Contenedor de Botones con Espaciado --\x3e\n        <LinearLayout\n            android:layout_width="match_parent"\n            android:layout_height="wrap_content"\n            android:layout_marginTop="20dp"\n            android:gravity="center"\n            android:orientation="horizontal"\n            android:paddingHorizontal="8dp">\n\n            <com.google.android.material.button.MaterialButton\n                android:id="@+id/registerButton"\n                android:layout_width="0dp"\n                android:layout_height="wrap_content"\n                android:layout_weight="1"\n                android:text="Registrarse"\n                android:layout_marginEnd="8dp" />\n\n            <com.google.android.material.button.MaterialButton\n                android:id="@+id/loginButton"\n                android:layout_width="0dp"\n                android:layout_height="wrap_content"\n                android:layout_weight="1"\n                android:text="Iniciar Sesi\xf3n"\n                android:layout_marginStart="8dp" />\n        </LinearLayout>\n\n    </LinearLayout>\n</LinearLayout>\n'})}),(0,t.jsxs)(n.admonition,{title:"ACTIVITY PRINCIPAL",type:"info",children:[(0,t.jsx)(n.p,{children:"Recuerda marcar Login Activity como actividad principal de tu aplicaci\xf3n:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<activity\n    android:name=".LoginActivity"\n    android:exported="true">\n    <intent-filter>\n        <action android:name="android.intent.action.MAIN" />\n        <category android:name="android.intent.category.LAUNCHER" />\n    </intent-filter>\n</activity>\n<activity\n    android:name=".MainActivity"\n    android:exported="false">\n</activity>\n'})})]}),(0,t.jsx)(n.h3,{id:"activity-principal",children:"Activity Principal"}),(0,t.jsx)(n.p,{children:"En esta Activity mostraremos informaci\xf3n b\xe1sica que devuelve Firebase Auth sobre el usuario. Adem\xe1s, ofreceremos un bot\xf3n para cerrar la sesi\xf3n."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:'title="activity_main.xml"',children:'<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:app="http://schemas.android.com/apk/res-auto"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    android:padding="20dp"\n    android:gravity="center"\n    android:orientation="vertical"\n    tools:context=".MainActivity">\n\n    \x3c!-- T\xedtulo --\x3e\n    <TextView\n        android:layout_width="wrap_content"\n        android:layout_height="wrap_content"\n        android:text="Informaci\xf3n del Usuario"\n        android:textSize="22sp"\n        android:textStyle="bold"\n        android:paddingBottom="16dp"/>\n\n    \x3c!-- Secci\xf3n: Correo --\x3e\n    <LinearLayout\n        android:layout_width="match_parent"\n        android:layout_height="wrap_content"\n        android:orientation="horizontal"\n        android:paddingBottom="8dp">\n\n        <TextView\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:text="Correo: "\n            android:textSize="16sp"\n            android:textStyle="bold"/>\n\n        <TextView\n            android:id="@+id/emailTextView"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:textSize="16sp"/>\n    </LinearLayout>\n\n    \x3c!-- Secci\xf3n: Fecha de Creaci\xf3n --\x3e\n    <LinearLayout\n        android:layout_width="match_parent"\n        android:layout_height="wrap_content"\n        android:orientation="horizontal"\n        android:paddingBottom="8dp">\n\n        <TextView\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:text="Fecha de Creaci\xf3n: "\n            android:textSize="16sp"\n            android:textStyle="bold"/>\n\n        <TextView\n            android:id="@+id/creationDateTextView"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:textSize="16sp"/>\n    </LinearLayout>\n\n    \x3c!-- Secci\xf3n: \xdaltima Conexi\xf3n --\x3e\n    <LinearLayout\n        android:layout_width="match_parent"\n        android:layout_height="wrap_content"\n        android:orientation="horizontal"\n        android:paddingBottom="16dp">\n\n        <TextView\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:text="\xdaltima Conexi\xf3n: "\n            android:textSize="16sp"\n            android:textStyle="bold"/>\n\n        <TextView\n            android:id="@+id/lastLoginTextView"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content"\n            android:textSize="16sp"/>\n    </LinearLayout>\n\n    \x3c!-- Bot\xf3n de Logout --\x3e\n    <com.google.android.material.button.MaterialButton\n        android:id="@+id/logoutButton"\n        android:layout_width="match_parent"\n        android:layout_height="wrap_content"\n        android:text="Cerrar Sesi\xf3n"\n        style="@style/Widget.MaterialComponents.Button"/>\n</LinearLayout>\n'})}),(0,t.jsx)(n.h2,{id:"3-programar-la-l\xf3gica-de-usuarios",children:"3. Programar la l\xf3gica de usuarios"}),(0,t.jsx)(n.h3,{id:"activity-login-1",children:"Activity Login"}),(0,t.jsxs)(n.p,{children:["En ",(0,t.jsx)(n.code,{children:"LoginActivity"})," incluimos todos los m\xe9todos necesarios para inicializar Firebase Authentication, registrar usuarios y loguearlos."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="LoginActivity"',children:"public class LoginActivity extends AppCompatActivity {\n\n    private ActivityLoginBinding binding;\n    private FirebaseAuth mAuth;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityLoginBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        // Inicializar FirebaseAuth\n        mAuth = FirebaseAuth.getInstance();\n\n        // Verificar si el usuario ya est\xe1 autenticado y redirigir a MainActivity\n        FirebaseUser user = mAuth.getCurrentUser();\n        if (user != null) {\n            iniciarMainActivity();\n        }\n\n        // Evento para registro\n        binding.registerButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                registerUser();\n            }\n        });\n\n        // Evento para inicio de sesi\xf3n\n        binding.loginButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                loginUser();\n            }\n        });\n    }\n}\n"})}),(0,t.jsxs)(n.p,{children:["\ud83d\udccc ",(0,t.jsx)(n.strong,{children:"Explicaci\xf3n:"}),(0,t.jsx)(n.br,{}),"\n","\u2714 Inicializa ",(0,t.jsx)(n.strong,{children:"FirebaseAuth"}),".",(0,t.jsx)(n.br,{}),"\n","\u2714 Verifica si ya hay un ",(0,t.jsx)(n.strong,{children:"usuario conectado"}),", en cuyo caso redirige a la pantalla principal.",(0,t.jsx)(n.br,{}),"\n","\u2714 Establece los eventos para los botones de LogIn y Registro."]}),(0,t.jsx)(n.h4,{id:"m\xe9todo-para-registrar-usuarios",children:"M\xe9todo para Registrar Usuarios"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="LoginActivity"',children:'    // Registra a un nuevo usuario con los valores introducidos\n    private void registerUser() {\n        String email = binding.emailEditText.getText().toString().trim();\n        String password = binding.passwordEditText.getText().toString().trim();\n\n        if (email.isEmpty() || password.isEmpty()) {\n            Toast.makeText(this, "Por favor completa todos los campos", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        mAuth.createUserWithEmailAndPassword(email, password)\n                .addOnCompleteListener(this, task -> {\n                    if (task.isSuccessful()) {\n                        // Recuperamos el usuario creado\n                        FirebaseUser user = mAuth.getCurrentUser();\n                        Toast.makeText(LoginActivity.this, "Registro exitoso: " + user.getEmail(), Toast.LENGTH_SHORT).show();\n                        iniciarMainActivity();\n                    } else {\n                        Toast.makeText(LoginActivity.this, "Error en el registro: " + task.getException().getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                });\n    }\n'})}),(0,t.jsxs)(n.p,{children:["\ud83d\udccc ",(0,t.jsx)(n.strong,{children:"Explicaci\xf3n:"}),(0,t.jsx)(n.br,{}),"\n","\u2714 Obtiene el ",(0,t.jsx)(n.strong,{children:"correo y contrase\xf1a"})," ingresados.",(0,t.jsx)(n.br,{}),"\n","\u2714 Verifica que los campos ",(0,t.jsx)(n.strong,{children:"no est\xe9n vac\xedos"}),".",(0,t.jsx)(n.br,{}),"\n","\u2714 Llama a ",(0,t.jsx)(n.code,{children:"createUserWithEmailAndPassword()"}),", que se ejecuta en segundo plano (task).",(0,t.jsx)(n.br,{}),"\n","\u2714 Si es exitoso, el usuario se registra en Firebase y navegamos a la pantalla principal de la aplicaci\xf3n."]}),(0,t.jsx)(n.h4,{id:"m\xe9todo-para-el-inicio-de-sesi\xf3n",children:"M\xe9todo para el Inicio de Sesi\xf3n"}),(0,t.jsxs)(n.p,{children:["Ahora agregamos el m\xe9todo ",(0,t.jsx)(n.code,{children:"loginUser()"}),", que autenticar\xe1 al usuario con Firebase."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="LoginActivity"',children:'    private void loginUser() {\n        String email = emailEditText.getText().toString().trim();\n        String password = passwordEditText.getText().toString().trim();\n\n        if (email.isEmpty() || password.isEmpty()) {\n            Toast.makeText(this, "Completa todos los campos", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        mAuth.signInWithEmailAndPassword(email, password)\n            .addOnCompleteListener(this, task -> {\n                if (task.isSuccessful()) {\n                    FirebaseUser usuario = mAuth.getCurrentUser();\n                    Toast.makeText(LoginActivity.this, "Inicio de sesi\xf3n exitoso: " + usuario.getEmail(), Toast.LENGTH_SHORT).show();\n                    iniciarMainActivity();\n                } else {\n                    Toast.makeText(MainActivity.this, "Error: " + task.getException().getMessage(), Toast.LENGTH_SHORT).show();\n                }\n            });\n    }\n'})}),(0,t.jsxs)(n.p,{children:["\ud83d\udccc ",(0,t.jsx)(n.strong,{children:"Explicaci\xf3n:"}),(0,t.jsx)(n.br,{}),"\n","\u2714 Obtiene el ",(0,t.jsx)(n.strong,{children:"correo y contrase\xf1a"})," ingresados.",(0,t.jsx)(n.br,{}),"\n","\u2714 Llama a ",(0,t.jsx)(n.code,{children:"signInWithEmailAndPassword()"}),", que se ejecuta en segundo plano (task).",(0,t.jsx)(n.br,{}),"\n",'\u2714 Si es exitoso, muestra un mensaje de "Inicio de sesi\xf3n exitoso".']}),(0,t.jsx)(n.h4,{id:"m\xe9todo-para-navegar-a-la-pantalla-principal",children:"M\xe9todo para navegar a la pantalla principal"}),(0,t.jsx)(n.p,{children:"Para reutilizar c\xf3digo, creamos un m\xe9todo que navegue a la pantalla principal:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="LoginActivity"',children:"    // Inicia la activity principal\n    private void iniciarMainActivity() {\n        Intent intent = new Intent(LoginActivity.this, MainActivity.class);\n        startActivity(intent);\n        finish();\n    }\n"})}),(0,t.jsx)(n.hr,{}),(0,t.jsx)(n.h3,{id:"activity-principal-1",children:"Activity Principal"}),(0,t.jsxs)(n.p,{children:["La ",(0,t.jsx)(n.code,{children:"MainActivity"})," carga los datos del usuario autenticado desde ",(0,t.jsx)(n.strong,{children:"Firebase Authentication"}),' y permite cerrar sesi\xf3n con el bot\xf3n de "Cerrar Sesi\xf3n".']}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="MainActivity.java"',children:'public class MainActivity extends AppCompatActivity {\n\n    private ActivityMainBinding binding;\n    private FirebaseAuth mAuth;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        // Inicializar FirebaseAuth\n        mAuth = FirebaseAuth.getInstance();\n\n        loadUserData();\n\n        binding.logoutButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                logoutUser();\n            }\n        });\n    }\n\n    // Recupera el usuario logueado y carga sus datos en los TextView\n    private void loadUserData() {\n        FirebaseUser user = mAuth.getCurrentUser();\n        if (user != null) {\n            // Obtener y mostrar el correo electr\xf3nico\n            String email = user.getEmail();\n            binding.emailTextView.setText(email != null ? email : "No disponible");\n\n            // Obtener, formatear y mostrar la fecha de creaci\xf3n de la cuenta\n            SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss", Locale.getDefault());\n            String creationDate = sdf.format(user.getMetadata().getCreationTimestamp());\n            binding.creationDateTextView.setText(creationDate);\n\n            // Obtener y mostrar la \xfaltima conexi\xf3n\n            String lastLoginDate = sdf.format(user.getMetadata().getLastSignInTimestamp());\n            binding.lastLoginTextView.setText(lastLoginDate);\n        } else {\n            Toast.makeText(this, "No hay usuario autenticado", Toast.LENGTH_SHORT).show();\n            // Si no hay usuario cargado volvemos al login\n            redirectToLogin();\n        }\n    }\n\n    // Cierra la sesi\xf3n del usuario\n    private void logoutUser() {\n        mAuth.signOut();\n        Toast.makeText(MainActivity.this, "Sesi\xf3n cerrada", Toast.LENGTH_SHORT).show();\n\n        redirectToLogin();\n    }\n\n    // Volvemos a la Activity de Login, limpiando la back stack para evitar que el usuario regrese con el bot\xf3n "atr\xe1s"\n    private void redirectToLogin() {\n        Intent intent = new Intent(MainActivity.this, LoginActivity.class);\n        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n        startActivity(intent);\n        finish();\n    }\n}\n'})}),(0,t.jsx)(n.h4,{id:"-explicaci\xf3n-del-c\xf3digo",children:(0,t.jsx)(n.strong,{children:"\ud83d\udccc Explicaci\xf3n del C\xf3digo"})}),(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"loadUserData()"})})]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Obtiene el usuario actual desde ",(0,t.jsx)(n.code,{children:"FirebaseAuth.getInstance().getCurrentUser()"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Extrae el ",(0,t.jsx)(n.strong,{children:"correo"}),", ",(0,t.jsx)(n.strong,{children:"fecha de creaci\xf3n"})," y ",(0,t.jsx)(n.strong,{children:"\xfaltima conexi\xf3n"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Usa ",(0,t.jsx)(n.code,{children:"SimpleDateFormat"})," para ",(0,t.jsx)(n.strong,{children:"formatear las fechas"})," en un formato legible (",(0,t.jsx)(n.code,{children:"dd/MM/yyyy HH:mm:ss"}),")."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"logoutUser()"})})]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Cierra la sesi\xf3n con ",(0,t.jsx)(n.code,{children:"mAuth.signOut()"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Muestra un ",(0,t.jsx)(n.code,{children:"Toast"})," confirmando el cierre de sesi\xf3n."]}),"\n",(0,t.jsxs)(n.li,{children:["Llama a ",(0,t.jsx)(n.code,{children:"redirectToLogin()"})," para enviar al usuario a la pantalla de login."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"redirectToLogin()"})})]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Redirige al usuario a ",(0,t.jsx)(n.code,{children:"LoginActivity.java"})," para volver a iniciar sesi\xf3n."]}),"\n",(0,t.jsxs)(n.li,{children:["Usa ",(0,t.jsx)(n.code,{children:"FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_CLEAR_TASK"}),' para limpiar la pila de actividades y evitar que el usuario regrese con el bot\xf3n de "atr\xe1s".']}),"\n"]}),(0,t.jsx)(n.admonition,{title:"METADATA DEL USUARIO",type:"info",children:(0,t.jsxs)(n.p,{children:["En la ",(0,t.jsx)(n.a,{href:"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser",children:"documentaci\xf3n"})," de Firebase puedes ver todos los datos que podemos obtener de la clase ",(0,t.jsx)(n.code,{children:"FirebaseUser"}),"."]})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},4675:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/descargar-google-services-json-fc9019ec9f01eb437662166bc81472aa.png"},21071:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/metodo-user-pass-5f587ecdb2e08ed47c728361adc884a9.png"},26482:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/metodo-acceso-c68d3d8894166841e0835496c8de375e.png"},26992:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/crear-proyecto-f3623ebe38b4ed9c24f5c5f59826f0a9.png"},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var a=i(96540);const t={},o=a.createContext(t);function r(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(o.Provider,{value:n},e.children)}},30824:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/agregar-proyecto-android-9d8551ada8712235cd4583bf66705817.png"},59431:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/app-login-mail-pass-1b1b29711b38def2707444d8bfce24ca.gif"},70922:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/panel-auth-23ea4e2259facfa2925eadf97e1a56ae.png"}}]);