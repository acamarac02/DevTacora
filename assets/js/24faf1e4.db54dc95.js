"use strict";(self.webpackChunkpmdm=self.webpackChunkpmdm||[]).push([[3946],{9792:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"pmdm_2425/ut5_persistencia/firebase/firestore/index","title":"Firestore Database","description":"En este tutorial, aprenderemos a usar Firebase Firestore en una aplicaci\xf3n Android, cubriendo desde la configuraci\xf3n inicial hasta consultas avanzadas.","source":"@site/docs/00_pmdm_2425/ut5_persistencia/4-firebase/2-firestore/index.md","sourceDirName":"00_pmdm_2425/ut5_persistencia/4-firebase/2-firestore","slug":"/pmdm_2425/ut5_persistencia/firebase/firestore/","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Firestore Database","title":"Firestore Database"},"sidebar":"pmdm_2425_Sidebar","previous":{"title":"Autenticaci\xf3n con Google","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/authentication/demo-gmail"},"next":{"title":"Configuraci\xf3n de Firestore","permalink":"/DevTacora/docs/pmdm_2425/ut5_persistencia/firebase/firestore/configuracion-android"}}');var a=n(4848),o=n(8453);const i={sidebar_label:"Firestore Database",title:"Firestore Database"},c="Firestore Database",t={},d=[{value:"Bases de datos en Firebase",id:"bases-de-datos-en-firebase",level:2},{value:"\ud83d\udd39 Firestore",id:"-firestore",level:3},{value:"\ud83d\udd39 Realtime Database",id:"-realtime-database",level:3},{value:"\ud83d\udd39 Estructura de datos",id:"-estructura-de-datos",level:3},{value:"<strong>1\ufe0f\u20e3 Datos en Realtime Database (Estructura en \xe1rbol JSON)</strong>",id:"1\ufe0f\u20e3-datos-en-realtime-database-estructura-en-\xe1rbol-json",level:4},{value:"<strong>2\ufe0f\u20e3 Datos en Firestore (Estructura basada en documentos y colecciones)</strong>",id:"2\ufe0f\u20e3-datos-en-firestore-estructura-basada-en-documentos-y-colecciones",level:4},{value:"\ud83d\udd39 Cuadro resumen de diferencias",id:"-cuadro-resumen-de-diferencias",level:3},{value:"\ud83d\udca1 \xbfCu\xe1l elegir?",id:"-cu\xe1l-elegir",level:3},{value:"Estructura de Firestore",id:"estructura-de-firestore",level:2},{value:"Documentos y Colecciones",id:"documentos-y-colecciones",level:3},{value:"Subcolecciones",id:"subcolecciones",level:3},{value:"\ud83d\udccc <strong>Soluci\xf3n alternativa si necesitas consultar pedidos globalmente</strong>",id:"-soluci\xf3n-alternativa-si-necesitas-consultar-pedidos-globalmente",level:4},{value:"Referencias",id:"referencias",level:3},{value:"\xbfCu\xe1ndo usar subcolecciones y cu\xe1ndo referencias?",id:"cu\xe1ndo-usar-subcolecciones-y-cu\xe1ndo-referencias",level:3},{value:"\ud83d\udccc <strong>\xbfCu\xe1ndo usar una subcolecci\xf3n en Firestore?</strong>",id:"-cu\xe1ndo-usar-una-subcolecci\xf3n-en-firestore",level:4},{value:"\ud83d\udccc <strong>\xbfCu\xe1ndo usar referencias en Firestore?</strong>",id:"-cu\xe1ndo-usar-referencias-en-firestore",level:4},{value:"\ud83d\udccc <strong>Resumen: \xbfSubcolecci\xf3n o Referencia?</strong>",id:"-resumen-subcolecci\xf3n-o-referencia",level:4},{value:"\ud83d\udccc <strong>Ejemplo pr\xe1ctico de comparaci\xf3n</strong>",id:"-ejemplo-pr\xe1ctico-de-comparaci\xf3n",level:4},{value:"Buenas Pr\xe1cticas al Dise\xf1ar la Estructura de tus Bases de Datos en Firestore",id:"buenas-pr\xe1cticas-al-dise\xf1ar-la-estructura-de-tus-bases-de-datos-en-firestore",level:3}];function l(e){const s={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)("div",{class:"justify-text",children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"firestore-database",children:"Firestore Database"})}),(0,a.jsxs)(s.p,{children:["En este tutorial, aprenderemos a usar ",(0,a.jsx)(s.strong,{children:"Firebase Firestore"})," en una aplicaci\xf3n Android, cubriendo desde la configuraci\xf3n inicial hasta consultas avanzadas."]}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h2,{id:"bases-de-datos-en-firebase",children:"Bases de datos en Firebase"}),(0,a.jsxs)(s.p,{children:["Firebase ofrece dos opciones principales de bases de datos en la nube para el desarrollo de aplicaciones m\xf3viles y web: ",(0,a.jsx)(s.strong,{children:"Firestore"})," y ",(0,a.jsx)(s.strong,{children:"Realtime Database"}),". Ambas permiten almacenar y sincronizar datos en tiempo real, pero tienen diferencias clave en su estructura, funcionamiento y casos de uso."]}),(0,a.jsx)(s.h3,{id:"-firestore",children:"\ud83d\udd39 Firestore"}),(0,a.jsx)(s.p,{children:"Firestore es una base de datos NoSQL basada en documentos y colecciones. Sus principales caracter\xedsticas incluyen:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Estructura flexible"}),": Los datos se almacenan en documentos dentro de colecciones, lo que facilita la organizaci\xf3n y escalabilidad."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Consultas avanzadas"}),": Soporta filtros, ordenaciones y combinaciones complejas sin necesidad de recuperar toda la base de datos."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Sincronizaci\xf3n en tiempo real"}),": Aunque Firestore no est\xe1 dise\xf1ado exclusivamente para tiempo real, permite el uso de ",(0,a.jsx)(s.strong,{children:"SnapshotListener"})," para obtener actualizaciones autom\xe1ticas."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Escalabilidad y rendimiento"}),": Maneja autom\xe1ticamente la indexaci\xf3n y permite consultas eficientes, ideal para grandes vol\xfamenes de datos."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Modo offline"}),": Permite trabajar sin conexi\xf3n y sincronizar los cambios cuando el dispositivo se conecta nuevamente."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"-realtime-database",children:"\ud83d\udd39 Realtime Database"}),(0,a.jsx)(s.p,{children:"Realtime Database es una base de datos NoSQL estructurada en forma de \xe1rbol JSON, dise\xf1ada espec\xedficamente para sincronizaci\xf3n en tiempo real. Sus caracter\xedsticas principales son:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Baja latencia"}),": Perfecta para aplicaciones que requieren actualizaciones instant\xe1neas, como chats en vivo o apps colaborativas."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Estructura basada en nodos"}),": Los datos se almacenan en un solo \xe1rbol JSON anidado, lo que puede complicar las consultas y la organizaci\xf3n de datos."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Escalabilidad limitada"}),": A medida que los datos crecen, las consultas pueden volverse ineficientes y aumentar los costos."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Modo offline"}),": Similar a Firestore, permite trabajar sin conexi\xf3n."]}),"\n"]}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h3,{id:"-estructura-de-datos",children:"\ud83d\udd39 Estructura de datos"}),(0,a.jsx)(s.p,{children:"Para analizar mejor las diferencias en el modelo de datos de ambas bases de datos, vamos a ver un ejemplo pr\xe1ctico. Supongamos que estamos implementando una aplicaci\xf3n de redes sociales donde los usuarios pueden hacer publicaciones y comentar en ellas."}),(0,a.jsx)(s.h4,{id:"1\ufe0f\u20e3-datos-en-realtime-database-estructura-en-\xe1rbol-json",children:(0,a.jsx)(s.strong,{children:"1\ufe0f\u20e3 Datos en Realtime Database (Estructura en \xe1rbol JSON)"})}),(0,a.jsxs)(s.p,{children:["En ",(0,a.jsx)(s.strong,{children:"Realtime Database"}),", los datos se almacenan en un solo \xe1rbol JSON. Aqu\xed hay un ejemplo donde los datos de los usuarios, publicaciones y comentarios est\xe1n organizados:"]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n  "users": {\n    "user_123": {\n      "name": "Juan P\xe9rez",\n      "email": "juan@example.com"\n    },\n    "user_456": {\n      "name": "Mar\xeda G\xf3mez",\n      "email": "maria@example.com"\n    }\n  },\n  "posts": {\n    "post_789": {\n      "userId": "user_123",\n      "content": "\xa1Hola, mundo!",\n      "timestamp": 1707551200,\n      "comments": {\n        "comment_1": {\n          "userId": "user_456",\n          "text": "\xa1Genial post!",\n          "timestamp": 1707551300\n        }\n      }\n    }\n  }\n}\n'})}),(0,a.jsxs)(s.p,{children:["\u2705 ",(0,a.jsx)(s.strong,{children:"Pros de esta estructura en Realtime Database"}),":"]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Es f\xe1cil acceder a los datos con rutas directas (",(0,a.jsx)(s.code,{children:"/posts/post_789/comments/comment_1"}),")."]}),"\n",(0,a.jsx)(s.li,{children:"La sincronizaci\xf3n en tiempo real es sencilla y r\xe1pida."}),"\n"]}),(0,a.jsxs)(s.p,{children:["\u274c ",(0,a.jsx)(s.strong,{children:"Contras"}),":"]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Los datos est\xe1n anidados, lo que puede causar problemas al escalar (cargar un post trae consigo todos sus comentarios)."}),"\n",(0,a.jsxs)(s.li,{children:["No permite consultas avanzadas (por ejemplo, no se pueden filtrar posts por fecha sin traer todo el nodo ",(0,a.jsx)(s.code,{children:"posts"}),")."]}),"\n"]}),(0,a.jsx)(s.h4,{id:"2\ufe0f\u20e3-datos-en-firestore-estructura-basada-en-documentos-y-colecciones",children:(0,a.jsx)(s.strong,{children:"2\ufe0f\u20e3 Datos en Firestore (Estructura basada en documentos y colecciones)"})}),(0,a.jsxs)(s.p,{children:["Firestore usa una estructura jer\xe1rquica con ",(0,a.jsx)(s.strong,{children:"colecciones"})," y ",(0,a.jsx)(s.strong,{children:"documentos"}),", lo que permite separar las relaciones y mejorar la escalabilidad. El mismo conjunto de datos en Firestore se organizar\xeda as\xed:"]}),(0,a.jsxs)(s.p,{children:["\ud83d\udcc2 ",(0,a.jsx)(s.strong,{children:"Colecci\xf3n: users/"}),(0,a.jsx)(s.br,{}),"\n","\ud83d\udcc4 ",(0,a.jsx)(s.code,{children:"user_123"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n  "name": "Juan P\xe9rez",\n  "email": "juan@example.com"\n}\n'})}),(0,a.jsxs)(s.p,{children:["\ud83d\udcc4 ",(0,a.jsx)(s.code,{children:"user_456"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n  "name": "Mar\xeda G\xf3mez",\n  "email": "maria@example.com"\n}\n'})}),(0,a.jsxs)(s.p,{children:["\ud83d\udcc2 ",(0,a.jsx)(s.strong,{children:"Colecci\xf3n: posts/"}),(0,a.jsx)(s.br,{}),"\n","\ud83d\udcc4 ",(0,a.jsx)(s.code,{children:"post_789"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n  "userId": "user_123",\n  "content": "\xa1Hola, mundo!",\n  "timestamp": 1707551200\n}\n'})}),(0,a.jsxs)(s.p,{children:["\ud83d\udcc2 ",(0,a.jsx)(s.strong,{children:"Subcolecci\xf3n dentro del post: posts/post_789/comments/"}),(0,a.jsx)(s.br,{}),"\n","\ud83d\udcc4 ",(0,a.jsx)(s.code,{children:"comment_1"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n  "userId": "user_456",\n  "text": "\xa1Genial post!",\n  "timestamp": 1707551300\n}\n'})}),(0,a.jsxs)(s.p,{children:["\u2705 ",(0,a.jsx)(s.strong,{children:"Pros de esta estructura en Firestore"}),":"]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Escalabilidad y eficiencia"}),": No se cargan todos los comentarios cuando se consulta un post. Se pueden traer solo los necesarios."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Consultas avanzadas"}),": Se pueden hacer filtros, ordenar por fecha, paginar resultados, etc."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Estructura flexible"}),": Se pueden agregar m\xe1s relaciones sin modificar la estructura base."]}),"\n"]}),(0,a.jsxs)(s.p,{children:["\u274c ",(0,a.jsx)(s.strong,{children:"Contras"}),":"]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"M\xe1s escritura y lecturas separadas (por ejemplo, obtener un post y luego traer sus comentarios requiere dos consultas)."}),"\n",(0,a.jsxs)(s.li,{children:["Sincronizaci\xf3n en tiempo real menos eficiente si se compara con Realtime Database (pero sigue siendo buena con ",(0,a.jsx)(s.code,{children:"SnapshotListener"}),")."]}),"\n"]}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h3,{id:"-cuadro-resumen-de-diferencias",children:"\ud83d\udd39 Cuadro resumen de diferencias"}),(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Caracter\xedstica"}),(0,a.jsx)(s.th,{children:"Firestore \ud83d\udfe0"}),(0,a.jsx)(s.th,{children:"Realtime Database \ud83d\udfe2"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Estructura"})}),(0,a.jsx)(s.td,{children:"Basada en documentos y colecciones"}),(0,a.jsx)(s.td,{children:"Basada en un \xe1rbol JSON"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Consultas"})}),(0,a.jsx)(s.td,{children:"Avanzadas, permite filtrar y ordenar por m\xfaltiples campos"}),(0,a.jsx)(s.td,{children:"Limitadas, requiere cargar grandes conjuntos de datos"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Tiempo real"})}),(0,a.jsx)(s.td,{children:"S\xed, pero optimizado para consultas eficientes"}),(0,a.jsx)(s.td,{children:"S\xed, con latencia muy baja"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Escalabilidad"})}),(0,a.jsx)(s.td,{children:"Alta, con indexaci\xf3n autom\xe1tica"}),(0,a.jsx)(s.td,{children:"Menos escalable, puede volverse ineficiente con datos grandes"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Modo offline"})}),(0,a.jsx)(s.td,{children:"Compatible en Android, iOS y Web"}),(0,a.jsx)(s.td,{children:"Compatible en Android, iOS y Web"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Seguridad"})}),(0,a.jsx)(s.td,{children:"Reglas detalladas por documento y colecci\xf3n"}),(0,a.jsx)(s.td,{children:"Reglas basadas en nodos JSON"})]})]})]}),(0,a.jsx)(s.h3,{id:"-cu\xe1l-elegir",children:"\ud83d\udca1 \xbfCu\xe1l elegir?"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\ud83d\udd25 ",(0,a.jsx)(s.strong,{children:"Usa Firestore"})," si necesitas consultas avanzadas, mejor escalabilidad y una estructura flexible."]}),"\n",(0,a.jsxs)(s.li,{children:["\u26a1 ",(0,a.jsx)(s.strong,{children:"Usa Realtime Database"})," si la prioridad es la sincronizaci\xf3n ultra r\xe1pida en tiempo real y la estructura en JSON no es un problema."]}),"\n"]}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h2,{id:"estructura-de-firestore",children:"Estructura de Firestore"}),(0,a.jsx)(s.p,{children:"El modelo de datos de Firestore es jer\xe1rquico, lo que permite estructurar la informaci\xf3n de manera eficiente, facilitando consultas avanzadas y manteniendo la escalabilidad."}),(0,a.jsx)(s.h3,{id:"documentos-y-colecciones",children:"Documentos y Colecciones"}),(0,a.jsxs)(s.p,{children:["Firestore organiza los datos en ",(0,a.jsx)(s.strong,{children:"colecciones"})," y ",(0,a.jsx)(s.strong,{children:"documentos"}),", en lugar de utilizar tablas como en una base de datos relacional. Ambas tienen el mismo significado que ya hemos estado en MongoDB."]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Colecci\xf3n:"})," Un conjunto de documentos similares."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Documento:"})," Una unidad de almacenamiento de datos en formato clave-valor dentro de una colecci\xf3n, donde las claves representan los nombres de los campos."]}),"\n"]}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Ejemplo: Base de datos de un sistema de gesti\xf3n de pedidos"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/orders (colecci\xf3n)\n   \u251c\u2500\u2500 order_001 (documento)\n   \u2502      \u251c\u2500\u2500 customerName: "Juan P\xe9rez"\n   \u2502      \u251c\u2500\u2500 total: 59.99\n   \u2502      \u251c\u2500\u2500 status: "En proceso"\n   \u2502      \u251c\u2500\u2500 items: [ "Pizza", "Refresco", "Postre" ]\n   \u2502      \u251c\u2500\u2500 orderDate: 1707551200\n   \u2502\n   \u251c\u2500\u2500 order_002 (documento)\n   \u2502      \u251c\u2500\u2500 customerName: "Ana G\xf3mez"\n   \u2502      \u251c\u2500\u2500 total: 35.50\n   \u2502      \u251c\u2500\u2500 status: "Entregado"\n   \u2502      \u251c\u2500\u2500 items: [ "Hamburguesa", "Papas" ]\n   \u2502      \u251c\u2500\u2500 orderDate: 1707551500\n'})}),(0,a.jsxs)(s.p,{children:["En este ejemplo:",(0,a.jsx)(s.br,{}),"\n","\u2705 La colecci\xf3n ",(0,a.jsx)(s.strong,{children:'"orders"'})," contiene m\xfaltiples documentos, cada uno representando un pedido.",(0,a.jsx)(s.br,{}),"\n","\u2705 Cada ",(0,a.jsx)(s.strong,{children:"documento"})," tiene campos como ",(0,a.jsx)(s.code,{children:"customerName"}),", ",(0,a.jsx)(s.code,{children:"total"}),", ",(0,a.jsx)(s.code,{children:"status"}),", etc.",(0,a.jsx)(s.br,{}),"\n","\u2705 La informaci\xf3n de cada pedido est\xe1 encapsulada en su respectivo documento."]}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h3,{id:"subcolecciones",children:"Subcolecciones"}),(0,a.jsxs)(s.p,{children:["Firestore permite organizar los datos en ",(0,a.jsx)(s.strong,{children:"subcolecciones"}),", que son colecciones dentro de un documento. Esto ayuda a estructurar mejor la informaci\xf3n y permite relaciones m\xe1s flexibles."]}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Ejemplo: Gesti\xf3n de usuarios con sus pedidos"})]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/users (colecci\xf3n)\n   \u251c\u2500\u2500 user_123 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Carlos L\xf3pez"\n   \u2502      \u251c\u2500\u2500 email: "carlos@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-1234"\n   \u2502      \u251c\u2500\u2500 address: "Av. Principal 123"\n   \u2502\n   \u2502      /orders (subcolecci\xf3n)\n   \u2502           \u251c\u2500\u2500 order_001 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 50.99\n   \u2502           \u2502      \u251c\u2500\u2500 status: "En proceso"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "Laptop", "Mouse" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551200\n   \u2502\n   \u2502           \u251c\u2500\u2500 order_002 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 99.50\n   \u2502           \u2502      \u251c\u2500\u2500 status: "Entregado"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "Monitor", "Teclado" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551500\n   \u2502\n   \u251c\u2500\u2500 user_456 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Mar\xeda G\xf3mez"\n   \u2502      \u251c\u2500\u2500 email: "maria@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-5678"\n   \u2502\n   \u2502      /orders (subcolecci\xf3n)\n   \u2502           \u251c\u2500\u2500 order_003 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 20.99\n   \u2502           \u2502      \u251c\u2500\u2500 status: "Cancelado"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "Aud\xedfonos" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551600\n'})}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Explicaci\xf3n de la estructura:"})]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"/users"})," es una colecci\xf3n que almacena documentos de usuarios."]}),"\n",(0,a.jsxs)(s.li,{children:["Cada usuario (",(0,a.jsx)(s.code,{children:"user_123"}),", ",(0,a.jsx)(s.code,{children:"user_456"}),", etc.) tiene un ",(0,a.jsx)(s.strong,{children:"documento"})," con su informaci\xf3n b\xe1sica."]}),"\n",(0,a.jsxs)(s.li,{children:["Dentro de cada documento de usuario, hay una ",(0,a.jsx)(s.strong,{children:"subcolecci\xf3n"})," ",(0,a.jsx)(s.code,{children:"/orders"}),", que almacena los pedidos del usuario."]}),"\n",(0,a.jsxs)(s.li,{children:["Cada pedido es un ",(0,a.jsx)(s.strong,{children:"documento"})," dentro de la subcolecci\xf3n ",(0,a.jsx)(s.code,{children:"/orders"}),"."]}),"\n"]}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"No obstante, ten en cuenta que:"})]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Esta estructura es \xfatil si los pedidos siempre se consultan desde el usuario"}),".","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Por ejemplo, si quieres obtener todos los pedidos de ",(0,a.jsx)(s.code,{children:"user_123"}),", puedes hacer una consulta directa a la subcolecci\xf3n ",(0,a.jsx)(s.code,{children:"/users/user_123/orders"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"No es la mejor opci\xf3n si necesitas consultar pedidos globalmente"}),".","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Si deseas listar ",(0,a.jsx)(s.strong,{children:"todos los pedidos"})," sin importar el usuario, tendr\xedas que recorrer cada usuario y su subcolecci\xf3n ",(0,a.jsx)(s.code,{children:"/orders"}),", lo cual no es eficiente."]}),"\n"]}),"\n"]}),"\n"]}),(0,a.jsxs)(s.h4,{id:"-soluci\xf3n-alternativa-si-necesitas-consultar-pedidos-globalmente",children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Soluci\xf3n alternativa si necesitas consultar pedidos globalmente"})]}),(0,a.jsxs)(s.p,{children:["Si necesitas ",(0,a.jsx)(s.strong,{children:"consultar los pedidos de forma independiente del usuario"}),", una mejor opci\xf3n ser\xeda mover los pedidos a una colecci\xf3n principal ",(0,a.jsx)(s.code,{children:"/orders"}),", utilizando una ",(0,a.jsx)(s.strong,{children:"referencia al usuario"})," en lugar de una subcolecci\xf3n."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/orders (colecci\xf3n)\n   \u251c\u2500\u2500 order_001 (documento)\n   \u2502      \u251c\u2500\u2500 userId: "user_123"\n   \u2502      \u251c\u2500\u2500 total: 50.99\n   \u2502      \u251c\u2500\u2500 status: "En proceso"\n   \u2502      \u251c\u2500\u2500 items: [ "Laptop", "Mouse" ]\n   \u2502      \u251c\u2500\u2500 orderDate: 1707551200\n   \u2502\n   \u251c\u2500\u2500 order_002 (documento)\n   \u2502      \u251c\u2500\u2500 userId: "user_123"\n   \u2502      \u251c\u2500\u2500 total: 99.50\n   \u2502      \u251c\u2500\u2500 status: "Entregado"\n   \u2502      \u251c\u2500\u2500 items: [ "Monitor", "Teclado" ]\n   \u2502      \u251c\u2500\u2500 orderDate: 1707551500\n   \u2502\n   \u251c\u2500\u2500 order_003 (documento)\n   \u2502      \u251c\u2500\u2500 userId: "user_456"\n   \u2502      \u251c\u2500\u2500 total: 20.99\n   \u2502      \u251c\u2500\u2500 status: "Cancelado"\n   \u2502      \u251c\u2500\u2500 items: [ "Aud\xedfonos" ]\n   \u2502      \u251c\u2500\u2500 orderDate: 1707551600\n\n/users (colecci\xf3n)\n   \u251c\u2500\u2500 user_123 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Carlos L\xf3pez"\n   \u2502      \u251c\u2500\u2500 email: "carlos@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-1234"\n   \u2502      \u251c\u2500\u2500 address: "Av. Principal 123"\n   \u2502\n   \u251c\u2500\u2500 user_456 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Mar\xeda G\xf3mez"\n   \u2502      \u251c\u2500\u2500 email: "maria@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-5678"\n'})}),(0,a.jsx)(s.admonition,{title:"IMPORTANCIA CASOS DE USO",type:"warning",children:(0,a.jsx)(s.p,{children:"Al igual que en el modelado de bases de datos en MongoDB, es fundamental considerar los casos de uso al dise\xf1ar nuestra estructura en Firestore. La forma en que modelamos las relaciones depender\xe1 de c\xf3mo se acceda y consulte la informaci\xf3n en la aplicaci\xf3n."})}),(0,a.jsx)(s.h3,{id:"referencias",children:"Referencias"}),(0,a.jsxs)(s.p,{children:["Tambi\xe9n se pueden almacenar ",(0,a.jsx)(s.strong,{children:"referencias a otros documentos"})," en lugar de duplicar datos."]}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Ejemplo:"})," En vez de incluir toda la informaci\xf3n de los items incluidos en un pedido, podemos almacenar una ",(0,a.jsx)(s.strong,{children:"referencia"})," al producto."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/users (colecci\xf3n)\n   \u251c\u2500\u2500 user_123 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Carlos L\xf3pez"\n   \u2502      \u251c\u2500\u2500 email: "carlos@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-1234"\n   \u2502      \u251c\u2500\u2500 address: "Av. Principal 123"\n   \u2502\n   \u2502      /orders (subcolecci\xf3n)\n   \u2502           \u251c\u2500\u2500 order_001 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 50.99\n   \u2502           \u2502      \u251c\u2500\u2500 status: "En proceso"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "/items/item_001", "/items/item_002" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551200\n   \u2502\n   \u2502           \u251c\u2500\u2500 order_002 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 99.50\n   \u2502           \u2502      \u251c\u2500\u2500 status: "Entregado"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "/items/item_003", "/items/item_004" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551500\n   \u2502\n   \u251c\u2500\u2500 user_456 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Mar\xeda G\xf3mez"\n   \u2502      \u251c\u2500\u2500 email: "maria@example.com"\n   \u2502      \u251c\u2500\u2500 phone: "555-5678"\n   \u2502\n   \u2502      /orders (subcolecci\xf3n)\n   \u2502           \u251c\u2500\u2500 order_003 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 total: 20.99\n   \u2502           \u2502      \u251c\u2500\u2500 status: "Cancelado"\n   \u2502           \u2502      \u251c\u2500\u2500 items: [ "/items/item_005" ]\n   \u2502           \u2502      \u251c\u2500\u2500 orderDate: 1707551600\n\n/items (colecci\xf3n)\n   \u251c\u2500\u2500 item_001 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Laptop"\n   \u2502      \u251c\u2500\u2500 price: 800.00\n   \u2502      \u251c\u2500\u2500 category: "Electr\xf3nica"\n   \u2502      \u251c\u2500\u2500 stock: 10\n   \u2502\n   \u251c\u2500\u2500 item_002 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Mouse"\n   \u2502      \u251c\u2500\u2500 price: 25.00\n   \u2502      \u251c\u2500\u2500 category: "Accesorios"\n   \u2502      \u251c\u2500\u2500 stock: 50\n   \u2502\n   \u251c\u2500\u2500 item_003 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Monitor"\n   \u2502      \u251c\u2500\u2500 price: 150.00\n   \u2502      \u251c\u2500\u2500 category: "Electr\xf3nica"\n   \u2502      \u251c\u2500\u2500 stock: 20\n   \u2502\n   \u251c\u2500\u2500 item_004 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Teclado"\n   \u2502      \u251c\u2500\u2500 price: 40.00\n   \u2502      \u251c\u2500\u2500 category: "Accesorios"\n   \u2502      \u251c\u2500\u2500 stock: 30\n   \u2502\n   \u251c\u2500\u2500 item_005 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Aud\xedfonos"\n   \u2502      \u251c\u2500\u2500 price: 35.00\n   \u2502      \u251c\u2500\u2500 category: "Audio"\n   \u2502      \u251c\u2500\u2500 stock: 15\n'})}),(0,a.jsxs)(s.p,{children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Ventajas de usar referencias en lugar de duplicar datos:"})]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Evita la redundancia de datos."}),"\n",(0,a.jsx)(s.li,{children:"Permite actualizar informaci\xf3n de los productos en un solo lugar."}),"\n"]}),(0,a.jsx)(s.h3,{id:"cu\xe1ndo-usar-subcolecciones-y-cu\xe1ndo-referencias",children:"\xbfCu\xe1ndo usar subcolecciones y cu\xe1ndo referencias?"}),(0,a.jsxs)(s.p,{children:["Decidir entre ",(0,a.jsx)(s.strong,{children:"usar subcolecciones"})," o ",(0,a.jsx)(s.strong,{children:"referencias"})," en Firestore depende de varios factores, como la frecuencia de acceso, el tama\xf1o de los datos y el rendimiento de las consultas. Aqu\xed te dejo una gu\xeda pr\xe1ctica para tomar la mejor decisi\xf3n."]}),(0,a.jsxs)(s.h4,{id:"-cu\xe1ndo-usar-una-subcolecci\xf3n-en-firestore",children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"\xbfCu\xe1ndo usar una subcolecci\xf3n en Firestore?"})]}),(0,a.jsx)(s.p,{children:"Usa subcolecciones cuando:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Los datos relacionados son dependientes y pueden crecer en n\xfamero (Ejemplo: comentarios en un post, pedidos de un usuario)."}),"\n",(0,a.jsx)(s.li,{children:"Los datos que se almacenan en la subcolecci\xf3n no tienen relaci\xf3n con otras colecciones (excepto la colecci\xf3n padre)."}),"\n",(0,a.jsx)(s.li,{children:"No siempre necesitas cargar los datos relacionados (Ejemplo: en una app de redes sociales, cargar un post sin cargar sus comentarios)."}),"\n"]}),(0,a.jsxs)(s.h4,{id:"-cu\xe1ndo-usar-referencias-en-firestore",children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"\xbfCu\xe1ndo usar referencias en Firestore?"})]}),(0,a.jsx)(s.p,{children:"Usa referencias cuando:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Los datos son reutilizables y compartidos entre m\xfaltiples documentos (Ejemplo: una mismo producto se puede pedir en varias pedidos)."}),"\n",(0,a.jsx)(s.li,{children:"No quieres duplicar informaci\xf3n (Ejemplo: si un usuario est\xe1 en m\xfaltiples grupos, se usa una referencia en lugar de copiar toda la info)."}),"\n",(0,a.jsx)(s.li,{children:"Necesitas acceder a los datos relacionados desde distintos lugares de la base de datos."}),"\n"]}),(0,a.jsxs)(s.h4,{id:"-resumen-subcolecci\xf3n-o-referencia",children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Resumen: \xbfSubcolecci\xf3n o Referencia?"})]}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Si los datos son dependientes y deben consultarse juntos (casi siempre) \u2192 Usa subcolecciones."}),"\n",(0,a.jsx)(s.li,{children:"Si los datos pueden reutilizarse en m\xfaltiples lugares \u2192 Usa referencias."}),"\n",(0,a.jsx)(s.li,{children:'Si la relaci\xf3n es "uno a muchos" \u2192 Subcolecci\xf3n.'}),"\n",(0,a.jsx)(s.li,{children:'Si la relaci\xf3n es "muchos a muchos" \u2192 Referencias.'}),"\n"]}),(0,a.jsxs)(s.h4,{id:"-ejemplo-pr\xe1ctico-de-comparaci\xf3n",children:["\ud83d\udccc ",(0,a.jsx)(s.strong,{children:"Ejemplo pr\xe1ctico de comparaci\xf3n"})]}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Caso 1: Un blog con comentarios en los posts"}),(0,a.jsx)(s.br,{}),"\n","\ud83d\udccc Mejor opci\xf3n: Subcolecci\xf3n",(0,a.jsx)(s.br,{}),"\n","\ud83d\udd39 Porque los comentarios pertenecen a un solo post y se acceden juntos.",(0,a.jsx)(s.br,{}),"\n","\ud83d\udd39 No tiene sentido duplicar comentarios en distintos lugares."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/posts (colecci\xf3n)\n   \u251c\u2500\u2500 post_123 (documento)\n   \u2502      \u251c\u2500\u2500 title: "Firestore vs Realtime Database"\n   \u2502\n   \u2502      /comments (subcolecci\xf3n)\n   \u2502           \u251c\u2500\u2500 comment_001 (documento)\n   \u2502           \u2502      \u251c\u2500\u2500 user: "Carlos"\n   \u2502           \u2502      \u251c\u2500\u2500 text: "\xa1Buen art\xedculo!"\n   \u2502           \u2502      \u251c\u2500\u2500 date: 1707551200\n'})}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Caso 2: Un marketplace con usuarios y productos comprados"}),(0,a.jsx)(s.br,{}),"\n","\ud83d\udccc Mejor opci\xf3n: Referencia",(0,a.jsx)(s.br,{}),"\n","\ud83d\udd39 Porque un usuario puede comprar m\xfaltiples productos, y un mismo producto puede ser comprado por varios usuarios.",(0,a.jsx)(s.br,{}),"\n","\ud83d\udd39 Se puede acceder a los productos sin necesidad de cargar informaci\xf3n del usuario."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-plaintext",children:'/users (colecci\xf3n)\n   \u251c\u2500\u2500 user_123 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Carlos L\xf3pez"\n   \u2502      \u251c\u2500\u2500 purchasedProducts: [ "/products/product_456", "/products/product_789" ]\n\n/products (colecci\xf3n)\n   \u251c\u2500\u2500 product_456 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Laptop"\n   \u2502      \u251c\u2500\u2500 price: 899.99\n   \u2502\n   \u251c\u2500\u2500 product_789 (documento)\n   \u2502      \u251c\u2500\u2500 name: "Mouse inal\xe1mbrico"\n   \u2502      \u251c\u2500\u2500 price: 29.99\n'})}),(0,a.jsx)(s.hr,{}),(0,a.jsx)(s.h3,{id:"buenas-pr\xe1cticas-al-dise\xf1ar-la-estructura-de-tus-bases-de-datos-en-firestore",children:"Buenas Pr\xe1cticas al Dise\xf1ar la Estructura de tus Bases de Datos en Firestore"}),(0,a.jsxs)(s.p,{children:["\u2705 ",(0,a.jsx)(s.strong,{children:"Usar colecciones para agrupar documentos similares:"})," No almacenes datos sin estructura clara.",(0,a.jsx)(s.br,{}),"\n","\u2705 ",(0,a.jsx)(s.strong,{children:"Evitar anidaci\xf3n excesiva de subcolecciones:"})," Aunque Firestore permite subcolecciones dentro de documentos, demasiada anidaci\xf3n puede hacer m\xe1s dif\xedciles las consultas.",(0,a.jsx)(s.br,{}),"\n","\u2705 ",(0,a.jsx)(s.strong,{children:"Utilizar referencias en lugar de duplicar datos:"})," Usa referencias a documentos en lugar de repetir informaci\xf3n en m\xfaltiples lugares.",(0,a.jsx)(s.br,{}),"\n","\u2705 ",(0,a.jsx)(s.strong,{children:"Optimizar las consultas con \xedndices:"})," Firestore indexa autom\xe1ticamente, pero algunas consultas avanzadas requieren crear \xedndices manualmente.",(0,a.jsx)(s.br,{}),"\n","\u2705 ",(0,a.jsx)(s.strong,{children:"Pensar en c\xf3mo se consultar\xe1n los datos:"})," La estructura de Firestore debe dise\xf1arse pensando en las consultas que se har\xe1n con mayor frecuencia."]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>c});var r=n(6540);const a={},o=r.createContext(a);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);